
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
    <meta property="og:title" content="SUZA">
    <meta property="og:description" content="Simple UI based smoothly Movie entertainment page">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta property="og:url" content="https://suza.vercel.app/">
    <meta property="og:image" content="https://suza.vercel.app/suza.png">
    <meta property="og:type" content="website">
    <link rel="icon" href="https://suza.vercel.app/suza.png" type="image/png">
  <title>SUZA - Home</title>
  
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Bootstrap & Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  
  <!-- Custom CSS -->
  <style>
    :root {
      --theme-color: #00c3ff; /* Default primary color (cyan-blue) */
      --theme-second-color: #ff5722; /* Default secondary color (orange-red) */
      --background-dark: #0f0f0f;
      --card-background: #1e1e1e;
      --text-light: #f1f1f1;
      --text-muted: #aaaaaa;
      --border-color: #333;
      --gradient-main: linear-gradient(90deg, var(--theme-color), var(--theme-second-color));
      --gradient-alt: linear-gradient(135deg, #6a11cb, #2575fc); /* Example secondary gradient */
    }

    /* Set a solid black background for the entire body */
    body {
      font-family: 'Inter', sans-serif; /* Primary font */
      background-color: black; /* Solid black background */
      background-image: none; /* Ensure no background image/gradient */
      background-attachment: fixed;
      color: var(--text-light);
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
      overflow-x: hidden;
      padding-bottom: 80px; /* Space for bottom nav */
    }
    
    img {
      -webkit-user-drag: none;
      cursor: default;
    }

    /* General containers */
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }

    /* Stylish section titles with icons */
    .stylish-text {
      font-family: 'Poppins', sans-serif;
      font-size: 2.5rem;
      font-weight: 700;
      background: var(--gradient-main);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 25px;
      margin-top: 30px;
      transition: background 0.3s ease;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .stylish-text i {
        font-size: 2rem;
        -webkit-text-fill-color: var(--theme-color);
        text-shadow: 0 0 8px rgba(var(--theme-color-rgb), 0.5); /* Subtle glow */
    }

    /* Header for sections with "More" link */
    .stylish-header-container {
        display: flex;
        justify-content: space-between;
        align-items: flex-end;
        margin-bottom: 15px;
    }
    .more-link {
        font-family: 'Inter', sans-serif;
        font-size: 1.1rem;
        font-weight: 500;
        color: var(--text-muted);
        text-decoration: none;
        transition: color 0.3s ease, transform 0.2s ease;
        padding-bottom: 5px;
        display: flex;
        align-items: center;
    }
    .more-link:hover {
        color: var(--theme-color);
        transform: translateX(5px);
    }
    .more-link i {
        font-size: 0.9em;
        margin-left: 5px;
        transition: transform 0.2s ease;
    }
    .more-link:hover i {
        transform: translateX(3px);
    }

    /* Hamburger and News Buttons (Mobile only) */
    .top-action-btn {
      position: absolute;
      top: 20px;
      background: rgba(0, 0, 0, 0.7); /* Slightly darker */
      backdrop-filter: blur(5px);
      border: none;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 30;
      transition: transform 0.3s ease, background 0.3s ease, box-shadow 0.3s ease;
      box-shadow: 0 4px 15px rgba(0,0,0,0.5);
    }
    .top-action-btn:hover {
      transform: scale(1.1);
      background: rgba(0, 0, 0, 0.9);
      box-shadow: 0 6px 20px rgba(0,0,0,0.6);
    }
    .top-action-btn i {
      font-size: 1.6rem;
      color: var(--text-light);
    }
    .hamburger-btn { left: 20px; }
    .news-btn { right: 20px; }

    /* Offcanvas Sidebar Enhancements */
    .offcanvas-start {
      width: 250px;
      background: rgba(0, 0, 0, 0.98); /* Almost opaque */
      backdrop-filter: blur(15px); /* Stronger blur */
      border-right: 1px solid var(--border-color);
      box-shadow: 5px 0 20px rgba(0,0,0,0.7);
    }
    .offcanvas-header { border-bottom: 1px solid var(--border-color); padding: 20px; }
    .offcanvas-header h5 { color: var(--text-light); font-family: 'Poppins', sans-serif; font-weight: 600; }
    .offcanvas-body {
        padding: 0; /* Remove default padding to control inner elements */
    }
    .offcanvas-body .provider-header {
        padding: 20px 20px 15px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        margin-bottom: 10px;
    }
    .offcanvas-body .provider-header h5 {
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--text-light);
        margin-bottom: 5px;
    }
    .offcanvas-body .provider-header p {
        font-size: 0.9rem;
        color: var(--text-muted);
    }

    .offcanvas-body ul { padding-left: 0; list-style: none; }
    .offcanvas-body ul li { margin-bottom: 5px; } /* Reduced margin */
    .offcanvas-body ul li a {
      display: flex;
      align-items: center;
      justify-content: space-between; /* To push checkmark to the right */
      background: transparent; /* Changed default background */
      border: 1px solid transparent; /* No default border */
      border-radius: 10px;
      padding: 12px 15px;
      color: var(--text-muted); /* Default text color */
      font-size: 1.1rem;
      text-decoration: none;
      transition: all 0.3s ease;
    }
    .offcanvas-body ul li a.active {
      background: rgba(255, 255, 255, 0.1); /* bg-white/10 equivalent */
      color: var(--text-light); /* Active text color */
      font-weight: 600;
    }
    .offcanvas-body ul li a:hover {
      background: rgba(255, 255, 255, 0.05); /* Subtle hover */
      color: var(--text-light);
    }
    .provider-link-content {
        display: flex;
        align-items: center;
    }
    .provider-icon {
      margin-right: 10px;
      font-size: 1.3rem;
      color: var(--text-muted); /* Default icon color */
      transition: color 0.3s ease;
    }
    .offcanvas-body ul li a.active .provider-icon {
        color: var(--theme-color); /* Active icon color */
    }
    .provider-check-icon {
        font-size: 1.2rem;
        color: var(--theme-color); /* Checkmark icon color */
    }


    /* HERO SECTION */
    #hero {
      position: relative;
      height: 85vh; /* Even taller hero section */
      background-size: cover;
      background-position: center;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      color: white;
      transition: background 0.7s ease-in-out; /* Slower transition */
      overflow: hidden;
      touch-action: pan-y;
      border-radius: 0 0 35px 35px; /* More rounded bottom corners */
      box-shadow: 0 15px 40px rgba(0,0,0,0.8);
      animation: heroBackgroundPan 60s infinite alternate linear; /* Subtle pan animation */
    }
    @keyframes heroBackgroundPan {
        0% { background-position: 0% 0%; }
        100% { background-position: 100% 100%; }
    }

    #hero-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(to top, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0.5) 50%, transparent 100%);
      z-index: 10;
    }
    #hero-content {
      position: relative;
      z-index: 20;
      opacity: 0;
      transform: translateY(70px);
      animation: fadeInUp 1.2s forwards cubic-bezier(0.2, 0.8, 0.2, 1); /* Slower, smoother fade in */
      padding: 0 25px;
      max-width: 900px; /* Wider content area */
      display: flex; /* Use flexbox for content alignment */
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }
    @keyframes fadeInUp {
      to { opacity: 1; transform: translateY(0); }
    }
    /* Removed #hero-mini-poster styles */
    #hero-title {
      font-family: 'Poppins', sans-serif;
      font-size: 4.2rem; /* Even larger hero title */
      font-weight: 700;
      letter-spacing: 3px; /* Wider spacing */
      margin-bottom: 1rem;
      text-shadow: 0 8px 25px rgba(0,0,0,0.9); /* Stronger shadow */
      line-height: 1.1;
      background: var(--gradient-main);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    #hero-synopsis {
        font-size: 1.1rem;
        color: var(--text-light);
        margin-bottom: 1.5rem;
        max-height: 80px; /* Limit synopsis height */
        overflow: hidden;
        text-overflow: ellipsis;
        display: -webkit-box;
        -webkit-line-clamp: 3; /* Show max 3 lines */
        -webkit-box-orient: vertical;
        text-shadow: 0 2px 10px rgba(0,0,0,0.5);
    }
    #hero-rating {
      font-size: 1.6rem;
      font-weight: 600;
      margin-bottom: 2rem;
      color: var(--text-light);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      text-shadow: 0 2px 8px rgba(0,0,0,0.5);
    }
    #hero-rating i {
        color: gold;
        font-size: 1.4em;
        filter: drop-shadow(0 0 5px rgba(255,215,0,0.7)); /* Star glow */
    }
    .hero-btn {
      padding: 18px 40px; /* Even larger button */
      background: var(--gradient-main);
      color: #fff;
      font-size: 1.3rem;
      border: none;
      border-radius: 35px; /* Even more rounded */
      transition: all 0.3s ease;
      cursor: pointer;
      font-weight: 600;
      margin-top: 2.5rem;
      box-shadow: 0 10px 30px rgba(0,0,0,0.7);
      display: inline-flex;
      align-items: center;
      gap: 12px;
      animation: pulse 2s infinite ease-in-out; /* Subtle pulse animation */
    }
    @keyframes pulse {
        0% { transform: scale(1); box-shadow: 0 10px 30px rgba(0,0,0,0.7); }
        50% { transform: scale(1.03); box-shadow: 0 15px 45px rgba(0,0,0,0.9); }
        100% { transform: scale(1); box-shadow: 0 10px 30px rgba(0,0,0,0.7); }
    }
    .hero-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 18px 50px rgba(0,0,0,0.9);
      background: var(--gradient-alt);
      animation: none; /* Stop pulse on hover */
    }
    .hero-btn i {
        font-size: 1.6em;
    }

    /* Dot Indicators */
    #hero-dots {
      /* Removed absolute positioning, now part of flex column */
      display: flex;
      justify-content: center;
      gap: 12px; /* Wider gap */
      z-index: 25;
      margin-top: 20px; /* Add margin to separate from the button */
    }
    .hero-dot {
      width: 16px; /* Even larger dots */
      height: 16px;
      background: rgba(255, 255, 255, 0.4); /* More transparent when inactive */
      border-radius: 50%;
      cursor: pointer;
      transition: all 0.3s ease;
      border: 2px solid rgba(255, 255, 255, 0.2);
    }
    .hero-dot.active {
      background: var(--theme-color);
      border-color: var(--theme-color);
      transform: scale(1.3); /* More pronounced active state */
      box-shadow: 0 0 15px rgba(var(--theme-color-rgb), 0.8); /* Glow effect */
    }

    /* Horizontal Scroll Sections */
    .horizontal-scroll {
      display: flex;
      overflow-x: scroll;
      padding: 15px 0;
      gap: 25px; /* Even wider gap */
      scroll-snap-type: x mandatory;
      -webkit-overflow-scrolling: touch;
      scrollbar-width: thin;
      scrollbar-color: var(--theme-color) var(--background-dark);
    }
    .horizontal-scroll::-webkit-scrollbar { height: 10px; } /* Thicker scrollbar */
    .horizontal-scroll::-webkit-scrollbar-track { background: var(--card-background); border-radius: 10px; }
    .horizontal-scroll::-webkit-scrollbar-thumb {
      background-color: var(--theme-color);
      border-radius: 10px;
      border: 3px solid var(--background-dark); /* Thicker border for thumb */
    }

    .scroll-item {
      flex: 0 0 auto;
      width: 180px; /* Even wider items */
      scroll-snap-align: start;
      border-radius: 20px; /* More rounded */
      overflow: hidden;
      cursor: pointer;
      transition: all 0.3s ease;
      background-color: var(--card-background);
      box-shadow: 0 8px 30px rgba(0,0,0,0.5); /* Stronger shadow */
      padding-bottom: 12px;
      position: relative; /* For shimmer effect */
    }
    .scroll-item::before { /* Shimmer effect for lazy loaded images */
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 240px; /* Match image height */
        background: linear-gradient(90deg, transparent, rgba(255,255,255,.05), transparent);
        transform: translateX(-100%);
        transition: transform 0.5s ease-out;
        z-index: 1;
    }
    .scroll-item.loading::before {
        transform: translateX(100%);
        animation: shimmer 1.5s infinite linear;
    }
    @keyframes shimmer {
        0% { transform: translateX(-100%); }
        100% { transform: translateX(100%); }
    }

    .scroll-item img {
      width: 100%;
      height: 270px; /* Fixed height for consistent images */
      object-fit: cover;
      border-radius: 20px 20px 0 0;
      transition: transform 0.4s ease-out; /* Slower, smoother zoom */
    }
    .scroll-item:hover {
      transform: translateY(-12px); /* More pronounced lift */
      box-shadow: 0 20px 50px rgba(0,0,0,0.8);
    }
    .scroll-item:hover img {
      transform: scale(1.1);
    }
    .scroll-item p {
      font-size: 15px; /* Slightly larger text */
      text-align: center;
      padding: 10px 8px 0;
      font-weight: 600; /* Bolder text */
      color: var(--text-light);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    /* Bottom Navigation Bar (Mobile only) */
    nav.navbar {
      background: rgba(0, 0, 0, 0.9); /* Darker, more opaque */
      backdrop-filter: blur(15px); /* Stronger blur */
      position: fixed;
      bottom: 0;
      width: 100%;
      display: flex;
      justify-content: space-around;
      align-items: center;
      padding: 15px 0; /* More padding */
      border-top: 1px solid var(--border-color);
      transition: transform 0.3s ease;
      z-index: 998;
      box-shadow: 0 -8px 25px rgba(0,0,0,0.7);
    }
    .nav-link {
      text-align: center;
      color: var(--text-light);
      transition: all 0.3s ease;
      padding: 12px 18px; /* More padding */
      border-radius: 15px; /* More rounded */
      font-size: 16px; /* Larger font */
      display: flex;
      flex-direction: column;
      align-items: center;
      text-decoration: none;
      position: relative; /* For active glow */
    }
    .nav-link i {
      font-size: 30px; /* Larger icons */
      margin-bottom: 6px;
    }
    .nav-link:hover, .nav-link.active {
      color: var(--theme-color);
      transform: scale(1.1); /* More pronounced scale */
      background-color: rgba(var(--theme-color-rgb), 0.15); /* More visible background */
    }
    .nav-link.active {
        font-weight: 600;
        text-shadow: 0 0 10px rgba(var(--theme-color-rgb), 0.5); /* Active text glow */
    }
    .nav-link.active::after { /* Active indicator */
        content: '';
        position: absolute;
        bottom: 5px;
        width: 30px;
        height: 4px;
        background: var(--gradient-main);
        border-radius: 2px;
        animation: activeUnderline 0.5s forwards;
    }
    @keyframes activeUnderline {
        from { width: 0px; }
        to { width: 30px; }
    }

    /* Desktop Mode Sidebar Navigation (Replaces Bottom Nav) */
    body.desktop-mode .nav_bar_container {
      position: fixed;
      top: 0;
      left: 0;
      width: 70px; /* Thicker when collapsed */
      height: 100vh;
      background: var(--card-background);
      color: var(--text-light);
      overflow-x: hidden;
      overflow-y: auto;
      white-space: nowrap;
      transition: width 0.4s ease, background 0.3s ease; /* Slower transition */
      border-top-right-radius: 20px;
      border-bottom-right-radius: 20px;
      box-shadow: 8px 0 25px rgba(0,0,0,0.6); /* Stronger shadow */
      z-index: 1000;
      padding-top: 30px;
    }
    body.desktop-mode .nav_bar_container:hover {
      width: 280px; /* Wider when expanded */
    }
    body.desktop-mode .nav_bar_container ul {
      list-style: none;
      margin: 0;
      padding: 0;
    }
    body.desktop-mode .nav_items {
      font-size: 1.2rem; /* Larger font */
      padding: 18px 25px; /* Increased padding */
      cursor: pointer;
      display: flex;
      align-items: center;
      color: var(--text-light);
      text-decoration: none;
      transition: all 0.3s ease;
      position: relative; /* For active glow */
    }
    body.desktop-mode .nav_items:hover {
      background: rgba(var(--theme-color-rgb), 0.2); /* More visible hover background */
      color: var(--theme-color);
      transform: translateX(8px); /* More pronounced slide */
    }
    body.desktop-mode .nav_items.active {
        background: var(--gradient-main);
        color: #fff;
        font-weight: 700; /* Bolder */
        box-shadow: inset 5px 0 20px rgba(0,0,0,0.4); /* Stronger inner shadow */
        text-shadow: 0 0 10px rgba(var(--theme-color-rgb), 0.6); /* Active text glow */
    }
    body.desktop-mode .nav_items .fa {
      margin-right: 20px; /* More spacing */
      min-width: 35px; /* Wider icon area */
      text-align: center;
      font-size: 1.6em; /* Larger icon */
      color: var(--text-light);
      transition: color 0.3s ease;
    }
    body.desktop-mode .nav_items.active .fa {
        color: #fff;
    }

    /* Hide mobile bottom nav in desktop mode */
    @media (min-width: 768px) {
      #bottom-nav { display: none !important; }
      .top-action-btn { display: none !important; }
      body.desktop-mode .container { margin-left: 90px; padding-top: 40px; }
      body.desktop-mode #hero { margin-left: 90px; border-radius: 0 0 35px 35px; }
      /* Hide desktop sidebar when mobile mode is active */
      body.mobile-mode .nav_bar_container { display: none !important; }
    }
    /* Mobile specific adjustments */
    @media (max-width: 767px) {
        body.desktop-mode .nav_bar_container { display: none !important; }
        body.mobile-mode .container { padding: 10px; }
        /* Removed #hero-mini-poster adjustments for mobile */
        #hero-title { font-size: 2.8rem; }
        #hero-rating { font-size: 1.3rem; }
        .hero-btn { padding: 12px 28px; font-size: 1.1rem; margin-top: 1.5rem;} /* Adjusted margin-top */
        .stylish-text { font-size: 2.2rem; }
        .stylish-text i { font-size: 1.8rem; }
        .more-link { font-size: 0.95rem; }
        .scroll-item { width: 140px; }
        .scroll-item img { height: 210px; }
        .scroll-item p { font-size: 13px; }
        .offcanvas-start { width: 85%; }
        #notification { bottom: 90px; /* Above bottom nav */ }
        /* Adjust mobile navigation link padding for better fit */
        nav.navbar .nav-link {
            padding: 8px 10px; /* Reduced padding */
            font-size: 14px; /* Slightly smaller font */
        }
        nav.navbar .nav-link i {
            font-size: 24px; /* Smaller icons */
            margin-bottom: 4px;
        }
    }

    /* Notification card */
    #notification {
      position: fixed;
      bottom: 80px;
      right: 20px;
      z-index: 1050;
      min-width: 280px;
      background-color: var(--card-background);
      border: 1px solid var(--border-color);
      border-radius: 12px;
      color: var(--text-light);
      box-shadow: 0 5px 20px rgba(0,0,0,0.5);
      padding: 15px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    #notification i {
        font-size: 1.5rem;
        color: var(--theme-color);
    }
    #notification .btn-light {
        background: var(--gradient-main);
        color: #fff;
        border: none;
        padding: 8px 15px;
        border-radius: 8px;
        font-weight: 500;
        transition: transform 0.2s ease, opacity 0.2s ease;
    }
    #notification .btn-light:hover {
        transform: scale(1.05);
        opacity: 0.9;
    }
    #notification .btn-close {
        filter: invert(1);
        position: absolute;
        top: 10px;
        right: 10px;
        font-size: 1rem;
        padding: 5px;
    }

    /* Scroll to Top Button */
    #scrollToTopBtn {
        display: none; /* Hidden by default */
        position: fixed;
        bottom: 90px; /* Above bottom nav/notification */
        left: 20px;
        z-index: 999;
        background: var(--gradient-alt);
        color: #fff;
        border: none;
        border-radius: 50%;
        width: 50px;
        height: 50px;
        font-size: 24px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        transition: opacity 0.3s ease, transform 0.3s ease;
        opacity: 0;
        pointer-events: none; /* Disable clicks when hidden */
    }
    #scrollToTopBtn.show {
        opacity: 1;
        pointer-events: auto; /* Enable clicks when shown */
        transform: translateY(-5px);
    }
    #scrollToTopBtn:hover {
        transform: translateY(-8px) scale(1.05);
        box-shadow: 0 8px 20px rgba(0,0,0,0.7);
    }

    /* Skeleton Loading Styles */
    .skeleton-loading {
        background-color: #333;
        animation: pulse-skeleton 1.5s infinite alternate;
        border-radius: 8px;
    }

    @keyframes pulse-skeleton {
        0% { opacity: 0.6; }
        100% { opacity: 1; }
    }

    .skeleton-text {
        height: 1em; /* Approximate line height */
        width: 80%; /* Example width */
        margin-bottom: 0.5em;
    }

    .skeleton-image {
        width: 100%;
        height: 270px; /* Match scroll-item img height */
        border-radius: 20px 20px 0 0;
    }

    .error-message {
        padding: 1rem;
        margin: 1rem;
        background-color: rgba(220, 38, 38, 0.2); /* Red-500/20 */
        border-radius: 0.5rem;
        min-height: 10rem; /* min-h-64 */
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        color: #f87171; /* Red-400 */
        font-weight: 500;
        text-align: center;
    }

    .error-message .subtext {
        color: #9ca3af; /* Gray-400 */
        font-size: 0.875rem;
        margin-top: 0.25rem;
    }

    .refresh-indicator {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 4px; /* Thin line */
        background: var(--theme-color);
        z-index: 1001;
        transform: scaleX(0);
        transform-origin: left;
        transition: transform 0.3s ease-out;
    }
    .refresh-indicator.active {
        transform: scaleX(1);
    }

    /* Fixed header for scroll effect */
    #fixed-header {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 60px; /* Adjust as needed */
      background-color: transparent; /* Start transparent */
      z-index: 99; /* Below offcanvas, above content */
      transition: background-color 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 20px;
    }

    #fixed-header.scrolled {
      background-color: black; /* Becomes black on scroll */
    }
  </style>
</head>

<body class="bg-dark text-light">

  <!-- Fixed Header for Scroll Effect -->
  <div id="fixed-header">
    <!-- Hamburger Button (Mobile only) -->
    <button class="hamburger-btn top-action-btn" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasProviders" aria-controls="offcanvasProviders" style="position: static;">
      <i class="bi bi-list"></i>
    </button>
    <h1 id="header-title" class="text-white text-xl font-bold">SUZA</h1>
    <!-- News Button (Mobile only) -->
    <button class="news-btn top-action-btn" type="button" onclick="window.location.href='news.html';" style="position: static;">
      <i class="bi bi-newspaper"></i>
    </button>
  </div>

  <!-- Refresh Indicator -->
  <div id="refresh-indicator" class="refresh-indicator"></div>

  <!-- HERO SECTION -->
  <div id="hero">
    <div id="hero-overlay"></div>
    <div id="hero-content">
      <h1 id="hero-title">Loading...</h1>
      <p id="hero-synopsis">Fetching exciting movie details...</p>
      <div id="hero-rating"><i class="bi bi-star-fill"></i> N/A</div>
      <button class="hero-btn" id="watch-hero"><i class="bi bi-play-fill"></i> Watch Now</button>
      <!-- Dot indicators container - Moved inside hero-content -->
      <div id="hero-dots"></div>
    </div>
  </div>

  <!-- Offcanvas Sidebar for Providers -->
  <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasProviders" aria-labelledby="offcanvasProvidersLabel">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title" id="offcanvasProvidersLabel">Providers</h5>
      <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
      <div class="provider-header">
        <h5>Select Provider</h5>
        <p>Content source</p>
      </div>
      <ul class="list-unstyled" id="provider-list">
        <!-- Provider links will be dynamically loaded here by JavaScript -->
        <p class="text-center text-muted">Loading providers...</p>
      </ul>
    </div>
  </div>

  <!-- MAIN CONTENT (Horizontal Scroll Sections) -->
  <div class="container mt-4">
    <!-- Continue Watching Section -->
    <div id="continue-watching-section" style="display: none;">
      <div class="stylish-header-container">
        <h3 class="stylish-text"><i class="bi bi-clock-history"></i> Continue Watching</h3>
        <a href="play-history.html" class="more-link">More <i class="bi bi-arrow-right"></i></a>
      </div>
      <div class="horizontal-scroll" id="continue-watching-scroll">
          <p class="text-center text-muted w-full">No recent watches.</p>
      </div>
    </div>

    <!-- Content Sliders -->
    <div id="content-sliders">
      <!-- Content will be dynamically loaded here by JavaScript -->
    </div>

    <!-- Error Component -->
    <div id="error-component" class="error-message" style="display: none;">
      <p id="error-message-text">Failed to load content</p>
      <p class="subtext">Pull to refresh and try again</p>
      <button id="error-retry-btn" class="btn btn-danger mt-3">Try Again</button>
    </div>

  </div>

  <!-- BOTTOM NAVIGATION BAR (Mobile only) -->
  <nav class="navbar navbar-dark fixed-bottom" id="bottom-nav">
    <div class="container-fluid d-flex justify-content-around">
      <a href="home.html" class="nav-link"><i class="bi bi-house-door-fill"></i></a>
      <a href="search.html" class="nav-link"><i class="bi bi-search"></i></a>
      <a href="watchlist.html" class="nav-link"><i class="bi bi-bookmark"></i></a>
      <a href="settings.html" class="nav-link"><i class="bi bi-gear"></i></a>
    </div>
  </nav>

  <!-- DESKTOP SIDEBAR NAVIGATION -->
  <div class="nav_bar_container">
    <ul>
      <a href="home.html" class="nav_items"><i class="fa fa-home"></i> Home</a>
      <a href="#" class="nav_items" data-bs-toggle="offcanvas" data-bs-target="#offcanvasProviders" aria-controls="offcanvasProviders"><i class="bi bi-grid-3x3-gap-fill"></i> Providers</a>
      <a href="genres.html" class="nav_items"><i class="bi bi-tags-fill"></i> Genres</a>
      <a href="new-releases.html" class="nav_items"><i class="bi bi-lightning-fill"></i> New Releases</a>
      <a href="popular.html" class="nav_items"><i class="bi bi-fire"></i> Popular</a>
      <a href="my-favorites.html" class="nav_items"><i class="bi bi-heart-fill"></i> My Favorites</a>
      <a href="search.html" class="nav_items"><i class="bi bi-search"></i> Search</a>
      <a href="watchlist.html" class="nav-link"><i class="bi bi-bookmark"></i> Watchlist</a>
      <a href="play-history.html" class="nav_items"><i class="bi bi-clock-history"></i> Play History</a>
      <a href="settings.html" class="nav_items"><i class="bi bi-gear"></i> Settings</a>
    </ul>
  </div>

  <!-- Notification card -->
  <div id="notification" class="alert alert-success alert-dismissible fade show" role="alert">
    <i class="bi bi-music-note"></i> 
    SUZA Music for your favourite song and heartbeat sound
    <button type="button" class="btn btn-light btn-sm" id="try-btn">Try</button>
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
  </div>

  <!-- Scroll to Top Button -->
  <button id="scrollToTopBtn" title="Go to top">
      <i class="bi bi-arrow-up"></i>
  </button>
  
  <!-- SCRIPTS -->
  <script>
    // Theme color management (similar to watch.html for consistency)
    let currentThemeColor = localStorage.getItem("themeColor") || '#00c3ff'; // Default if not set

    window.addEventListener('load', function () {
        var savedColor = localStorage.getItem("themeColor");
        if (savedColor) {
            currentThemeColor = savedColor;
            document.documentElement.style.setProperty('--theme-color', savedColor);
            let r = parseInt(savedColor.substring(1, 3), 16);
            let g = parseInt(savedColor.substring(3, 5), 16);
            let b = parseInt(savedColor.substring(5, 7), 16);
            document.documentElement.style.setProperty('--theme-color-rgb', `${r},${g},${b}`);
            document.documentElement.style.setProperty('--theme-second-color', '#ff5722');
            let r2 = parseInt('ff', 16);
            let g2 = parseInt('57', 16);
            let b2 = parseInt('22', 16);
            document.documentElement.style.setProperty('--theme-second-color-rgb', `${r2},${g2},${b2}`);
        }
        applyGradientToStylishText(); // Apply gradient on load after theme color is set
    });

    function applyGradientToStylishText() {
        document.querySelectorAll('.stylish-text').forEach(function (element) {
            element.style.background = `linear-gradient(45deg, var(--theme-color), var(--theme-second-color))`;
            element.style.webkitBackgroundClip = 'text';
            element.style.webkitTextFillColor = 'transparent';
        });
    }

    // Hide hamburger when offcanvas opens and show it when closed
    var offcanvasEl = document.getElementById('offcanvasProviders');
    if (offcanvasEl) {
      offcanvasEl.addEventListener('show.bs.offcanvas', function () {
        const hamburgerBtn = document.querySelector('.hamburger-btn');
        if (hamburgerBtn) hamburgerBtn.style.opacity = '0';
      });
      offcanvasEl.addEventListener('hidden.bs.offcanvas', function () {
        const hamburgerBtn = document.querySelector('.hamburger-btn');
        if (hamburgerBtn) hamburgerBtn.style.opacity = '1';
      });
    }

    // On the provider selection page, set the active provider based on the URL parameter.
    document.addEventListener('DOMContentLoaded', function() {
      var path = window.location.pathname.split("/").pop();
      if (path === '') {
        path = 'home.html';
      }

      var navLinks = document.querySelectorAll('nav.navbar .nav-link, .nav_bar_container .nav_items');

      navLinks.forEach(function(link) {
        var href = link.getAttribute('href');
        // Check if href is for offcanvas toggle (e.g., '#')
        if (href === '#' && link.dataset.bsToggle === 'offcanvas') {
            // This link opens an offcanvas, it's not a navigation page
            link.classList.remove('active'); // Ensure it's not active based on URL
            return; 
        }

        const linkFilename = href.split('/').pop();
        if (linkFilename === path) {
          link.classList.add('active');
        } else {
          link.classList.remove('active');
        }
      });
    });

    // --- Provider Selection Logic (Replicated from ProviderDrawer.tsx concept) ---
    let installedProviders = []; // Will be populated dynamically
    let currentProvider = null; // To store the currently active provider object

    // Function to fetch providers data
    async function fetchProviders() {
        try {
            // This URL should point to your actual modflix.json or similar provider list
            const response = await fetch('https://himanshu8443.github.io/providers/modflix.json');
            if (!response.ok) {
                console.error('Failed to fetch providers:', response.statusText);
                return [];
            }
            const data = await response.json();
            
            // Transform the fetched data into the desired format
            return Object.keys(data).map(key => ({
                value: key,
                display_name: data[key].display_name || key, // Use display_name if available, otherwise key
                icon: data[key].icon || 'bi-film', // Use a default icon if not specified
                url: data[key].url || `${key}.html?provider=${key}` // Construct a default URL
            }));
        } catch (error) {
            console.error('Error fetching provider data:', error);
            return []; // Return empty array on error
        }
    }

    // Function to render providers
    async function renderProviders() {
        const providerListElement = document.getElementById('provider-list');
        providerListElement.innerHTML = '<p class="text-center text-muted">Loading providers...</p>'; // Show loading state

        installedProviders = await fetchProviders(); // Fetch and populate the global array

        if (installedProviders.length === 0) {
            providerListElement.innerHTML = '<p class="text-center text-muted">No providers available.</p>';
            return;
        }

        const urlParams = new URLSearchParams(window.location.search);
        let activeProviderValue = urlParams.get('provider') || localStorage.getItem('activeProvider') || installedProviders[0].value;

        // Ensure the activeProviderValue is actually in the list of installedProviders
        const foundActive = installedProviders.find(p => p.value === activeProviderValue);
        if (!foundActive) {
            activeProviderValue = installedProviders[0].value; // Default to first if not found
            localStorage.setItem('activeProvider', activeProviderValue);
        }
        currentProvider = foundActive || installedProviders[0]; // Set the global currentProvider

        providerListElement.innerHTML = ''; // Clear loading message

        installedProviders.forEach(item => {
            const li = document.createElement('li');
            const a = document.createElement('a');
            a.href = item.url; // Use the URL for navigation
            a.className = `provider-link`;
            a.dataset.provider = item.value;

            const contentDiv = document.createElement('div');
            contentDiv.className = 'provider-link-content';

            const icon = document.createElement('i');
            icon.className = `bi ${item.icon} provider-icon`;
            contentDiv.appendChild(icon);

            const text = document.createElement('span');
            text.className = 'ml-3 text-base';
            text.textContent = item.display_name;
            contentDiv.appendChild(text);

            a.appendChild(contentDiv);

            // Add checkmark if active
            if (item.value === activeProviderValue) {
                a.classList.add('active');
                const checkIcon = document.createElement('i');
                checkIcon.className = 'bi bi-check provider-check-icon';
                a.appendChild(checkIcon);
            }

            a.addEventListener('click', function(e) {
                // Prevent default link navigation if you want to handle it via JS
                // e.preventDefault(); 
                
                // Update active provider in localStorage
                localStorage.setItem('activeProvider', item.value);
                currentProvider = item; // Update current active
                renderProviders(); // Re-render to update active state visuals
                // Optionally close offcanvas here
                const offcanvasInstance = bootstrap.Offcanvas.getInstance(offcanvasEl) || new bootstrap.Offcanvas(offcanvasEl);
                offcanvasInstance.hide();
                // Reload content based on new provider
                fetchHomePageData();
            });
            li.appendChild(a);
            providerListElement.appendChild(li);
        });
    }


    // === API Keys ===
    const OMDB_API_KEY = "90b37ad0";
    const TRAKT_CLIENT_ID = "97ca49d276bd090c063dd2c6174ed4c622ee58d443d1160aac87276f50b34b36";
    const TMDB_API_KEY = "b6b677eb7d4ec17f700e3d4dfc31d005"; // Your TMDb API key

    // === Hero Carousel Variables ===
    let heroMovies = [];
    let heroIndex = 0;
    let heroInterval;
    let homePageData = []; // Stores fetched data for all sections
    let isLoadingData = false;
    let dataError = null; // Stores error message if any

    // === Swipe Detection Variables ===
    let touchStartX = 0;
    let touchEndX = 0;
    const swipeThreshold = 50;

    // === Global Event Listeners --- Moved to the end of the script or inline in HTML
    document.addEventListener('contextmenu', function(e) { e.preventDefault(); });
    document.addEventListener('touchstart', function(e) { if(e.touches.length > 1) { e.preventDefault(); } });


    // === Hero Carousel Functions ===
    async function fetchHeroMovies() {
      const trendingTitles = [
        "Jawan", "Animal", "Pathaan", "K.G.F: Chapter 2", "Vikram", "RRR",
        "Solo Leveling", "Demon Slayer: Kimetsu no Yaiba", "Jujutsu Kaisen", "Spy x Family"
      ];
      const randomTrendingTitle = trendingTitles[Math.floor(Math.random() * trendingTitles.length)];

      try {
        const response = await fetch(`https://www.omdbapi.com/?s=${encodeURIComponent(randomTrendingTitle)}&apikey=${OMDB_API_KEY}`);
        const data = await response.json();

        if (data.Search && data.Search.length > 0) {
          const itemsToFetch = data.Search.filter(item => item.Type !== "game").slice(0, 5);
          const detailsPromises = itemsToFetch.map(item =>
            fetch(`https://www.omdbapi.com/?i=${item.imdbID}&apikey=${OMDB_API_KEY}&plot=short`).then(res => res.json())
          );
          heroMovies = await Promise.all(detailsPromises);
          heroMovies = heroMovies.filter(movie => movie && movie.Response !== "False" && movie.Poster && movie.Poster !== "N/A");

          if (heroMovies.length > 0) {
            heroIndex = 0;
            showHeroMovie(heroIndex);
            buildHeroDots();
            if (heroInterval) clearInterval(heroInterval);
            heroInterval = setInterval(() => {
              heroIndex = (heroIndex + 1) % heroMovies.length;
              showHeroMovie(heroIndex);
            }, 5000);
          } else {
            setHeroFallback("No valid hero content found.");
          }
        } else {
          setHeroFallback(`No search results for "${randomTrendingTitle}".`);
        }
      } catch (error) {
        console.error("Error fetching hero movies:", error);
        setHeroFallback("Error loading content.");
      }
    }

    function setHeroFallback(message) {
      document.getElementById("hero").style.backgroundImage = "url('https://placehold.co/1200x600/1a1a1a/cccccc?text=Content+Unavailable')";
      document.getElementById("hero-title").textContent = message;
      document.getElementById("hero-synopsis").textContent = ""; // Clear synopsis
      document.getElementById("hero-rating").innerHTML = '';
      document.getElementById("watch-hero").style.display = "none";
      document.getElementById("hero-dots").innerHTML = "";
    }

    function buildHeroDots() {
      const dotsContainer = document.getElementById("hero-dots");
      dotsContainer.innerHTML = "";
      heroMovies.forEach((movie, idx) => {
        const dot = document.createElement("div");
        dot.classList.add("hero-dot");
        if (idx === heroIndex) dot.classList.add("active");
        dot.addEventListener("click", () => {
          heroIndex = idx;
          showHeroMovie(heroIndex);
          resetHeroInterval();
        });
        dotsContainer.appendChild(dot);
      });
    }

    function resetHeroInterval() {
      clearInterval(heroInterval);
      heroInterval = setInterval(() => {
        heroIndex = (heroIndex + 1) % heroMovies.length;
        showHeroMovie(heroIndex);
      }, 5000);
    }

    function showHeroMovie(index) {
      const movie = heroMovies[index];
      if (!movie) return;

      document.getElementById("hero").style.backgroundImage = `url(${movie.Poster})`;
      
      document.getElementById("hero-title").textContent = movie.Title || "Unknown Title";
      document.getElementById("hero-synopsis").textContent = movie.Plot || "Synopsis not available."; // Set synopsis
      document.getElementById("hero-rating").innerHTML = `<i class="bi bi-star-fill"></i> ${movie.imdbRating && movie.imdbRating !== "N/A" ? movie.imdbRating : "N/A"}`;

      const watchButton = document.getElementById("watch-hero");
      watchButton.style.display = "inline-flex";
      watchButton.onclick = () => {
          let watchPageURL = `watch.html?title=${encodeURIComponent(movie.Title)}&type=${movie.Type.toLowerCase()}`;
          if (movie.imdbID) {
              watchPageURL += `&id=${movie.imdbID}`;
          }
          if (movie.Poster) {
              watchPageURL += `&poster=${encodeURIComponent(movie.Poster)}`;
              watchPageURL += `&bigPoster=${encodeURIComponent(movie.Poster)}`;
          }
          window.location.href = watchPageURL;
      };

      const dots = document.querySelectorAll(".hero-dot");
      dots.forEach((dot, idx) => {
        dot.classList.toggle("active", idx === index);
      });

      const heroContent = document.getElementById("hero-content");
      heroContent.style.animation = 'none';
      void heroContent.offsetWidth; // Trigger reflow
      heroContent.style.animation = 'fadeInUp 1.2s forwards cubic-bezier(0.2, 0.8, 0.2, 1)';
    }

    // --- Home Page Data Fetching and Rendering ---
    const homePageCatalogs = [
        { title: "Upcoming", filter: "upcoming", fetch: fetchUpcomingMoviesTMDB, type: 'movie' },
        { title: "Movies", filter: "movies_trending", fetch: () => fetchTraktItemsAndOMDbDetails("movies/trending"), type: 'movie' },
        { title: "Anime", filter: "anime_popular", fetch: fetchAnimeFromAniList, type: 'anime' },
        { title: "Web Series", filter: "shows_trending", fetch: () => fetchTraktItemsAndOMDbDetails("shows/trending"), type: 'series' },
        { title: "TV Shows", filter: "tv_popular", fetch: fetchPopularTvShowsTMDB, type: 'series' },
        { title: "Bollywood", filter: "bollywood", fetch: fetchBollywoodMoviesOMDb, type: 'movie' }
    ];

    async function fetchHomePageData() {
        isLoadingData = true;
        dataError = null;
        document.getElementById('refresh-indicator').classList.add('active'); // Show refresh indicator
        renderContentSliders(); // Show loading skeletons

        if (!currentProvider || !currentProvider.value) {
            dataError = "No provider selected or available.";
            isLoadingData = false;
            renderContentSliders();
            document.getElementById('refresh-indicator').classList.remove('active');
            return;
        }

        try {
            // Simulate fetching data for each catalog based on the active provider
            // In a real scenario, you'd integrate with the actual provider logic (e.g., from your .ts files)
            const promises = homePageCatalogs.map(async (catalog) => {
                let posts = [];
                // This is a placeholder. In a real app, you'd call the appropriate
                // provider function based on currentProvider.value and catalog.filter
                // For now, we'll use the existing OMDb/TMDb/AniList fetches.
                try {
                    posts = await catalog.fetch(); 
                } catch (e) {
                    console.error(`Error fetching data for ${catalog.title} from provider ${currentProvider.display_name}:`, e);
                    posts = []; // Ensure posts is an empty array on error for this section
                }
                return {
                    title: catalog.title,
                    filter: catalog.filter,
                    Posts: posts
                };
            });
            homePageData = await Promise.all(promises);
            dataError = null;
        } catch (error) {
            console.error("Error fetching home page data:", error);
            dataError = error.message || "Failed to load content for the selected provider.";
            homePageData = [];
        } finally {
            isLoadingData = false;
            document.getElementById('refresh-indicator').classList.remove('active'); // Hide refresh indicator
            renderContentSliders(); // Render actual content or error
        }
    }

    function renderContentSliders() {
        const contentSlidersContainer = document.getElementById('content-sliders');
        const errorComponent = document.getElementById('error-component');
        const errorMessageText = document.getElementById('error-message-text');
        const errorRetryBtn = document.getElementById('error-retry-btn');

        contentSlidersContainer.innerHTML = ''; // Clear previous content
        errorComponent.style.display = 'none'; // Hide error by default

        if (dataError) {
            errorMessageText.textContent = dataError;
            errorComponent.style.display = 'flex'; // Show error
            errorRetryBtn.onclick = fetchHomePageData; // Set retry action
            return;
        }

        if (isLoadingData) {
            // Render loading skeletons for all catalogs
            homePageCatalogs.forEach(catalog => {
                const sectionHtml = `
                    <div class="stylish-header-container">
                        <h3 class="stylish-text skeleton-loading skeleton-text" style="width: 150px;"></h3>
                    </div>
                    <div class="horizontal-scroll">
                        ${Array(5).fill('').map(() => `
                            <div class="scroll-item">
                                <div class="skeleton-loading skeleton-image"></div>
                                <p class="skeleton-loading skeleton-text" style="width: 80%; margin: 10px auto 0;"></p>
                            </div>
                        `).join('')}
                    </div>
                `;
                contentSlidersContainer.innerHTML += sectionHtml;
            });
        } else {
            // Render actual content
            homePageData.forEach(item => {
                const sectionHtml = `
                    <div class="stylish-header-container">
                        <h3 class="stylish-text"><i class="bi bi-film"></i> ${item.title}</h3>
                        <a href="more.html?filter=${item.filter}" class="more-link">More <i class="bi bi-arrow-right"></i></a>
                    </div>
                    <div class="horizontal-scroll">
                        ${item.Posts.length > 0 ? item.Posts.map(post => {
                            const title = post.Title || post.title || "Untitled";
                            const posterUrl = post.Poster || post.poster || post.coverImage?.extraLarge || post.coverImage?.large || post.coverImage?.medium || "https://placehold.co/180x270/2a2a2a/cccccc?text=No+Image";
                            const shortTitle = title.length > 18 ? title.substring(0, 18) + "..." : title;
                            const itemType = post.Type || item.type; // Use item.type as fallback for section

                            return `
                                <div class="scroll-item" 
                                     onclick="openWatchPageWithDetails('${encodeURIComponent(title)}', 
                                                                         '${encodeURIComponent(post.imdbID || '')}', 
                                                                         '${encodeURIComponent(posterUrl)}',
                                                                         '${encodeURIComponent(itemType)}')">
                                    <img src="${posterUrl}" alt="${title}" loading="lazy">
                                    <p>${shortTitle}</p>
                                </div>
                            `;
                        }).join('') : `<p class="text-center text-muted w-full">No content available for ${item.title}.</p>`}
                    </div>
                `;
                contentSlidersContainer.innerHTML += sectionHtml;
            });
        }
    }


    // --- Data Fetching Functions for Sections ---
    async function fetchTraktItemsAndOMDbDetails(endpoint, limit = 10) {
        if (!TRAKT_CLIENT_ID) { console.error("Trakt Client ID is not set. Cannot fetch from Trakt."); return []; }
        if (!OMDB_API_KEY) { console.error("OMDb API Key is not set. Cannot fetch details from OMDb."); return []; }

        try {
            const traktResponse = await fetch(`https://api.trakt.tv/${endpoint}?limit=${limit}`, {
                headers: { 'Content-Type': 'application/json', 'trakt-api-key': TRAKT_CLIENT_ID, 'trakt-api-version': '2' }
            });
            if (!traktResponse.ok) { console.error(`Trakt API error for ${endpoint}: ${traktResponse.status}`, await traktResponse.text()); return []; }
            const traktData = await traktResponse.json();
            const itemsWithImdbId = traktData.map(item => item.movie || item.show).filter(item => item && item.ids && item.ids.imdb);
            const omdbDetailsPromises = itemsWithImdbId.map(item =>
                fetch(`https://www.omdbapi.com/?i=${item.ids.imdb}&apikey=${OMDB_API_KEY}&plot=short`)
                    .then(res => res.json())
                    .catch(e => { console.error(`OMDb fetch error for ${item.ids.imdb}:`, e); return null; })
            );
            const omdbDetails = await Promise.all(omdbDetailsPromises);
            return omdbDetails.filter(item => item && item.Response !== "False" && item.Poster && item.Poster !== "N/A");
        } catch (error) { console.error(`Error in fetchTraktItemsAndOMDbDetails for ${endpoint}:`, error); return []; }
    }

    async function fetchUpcomingMoviesTMDB(count = 10) {
        const corsProxy = "https://api.allorigins.win/raw?url=";
        const url = `${corsProxy}https://api.themoviedb.org/3/movie/upcoming?api_key=${TMDB_API_KEY}&language=en-US&page=1`;
        try {
            const response = await fetch(url);
            if (!response.ok) { console.error(`TMDb API error for upcoming movies: ${response.status}`); return []; }
            const data = await response.json();
            return data.results.slice(0, count).map(movie => ({
                Title: movie.title,
                Poster: movie.poster_path ? `https://image.tmdb.org/t/p/w500${movie.poster_path}` : 'https://placehold.co/180x270/2a2a2a/cccccc?text=No+Image',
                Type: 'movie',
                imdbID: movie.imdb_id
            }));
        } catch (error) { console.error("TMDb upcoming fetch failed:", error); return []; }
    }

    async function fetchAnimeFromAniList(limit = 10) {
        const ANILIST_API_URL = 'https://graphql.anilist.co';
        const query = `
            query { Page(perPage: ${limit}) { media(type: ANIME, sort: POPULARITY_DESC) { id title { romaji english } coverImage { extraLarge large medium } externalLinks { url site } } } }
        `;
        try {
            const response = await fetch(ANILIST_API_URL, {
                method: 'POST', headers: { 'Content-Type': 'application/json', 'Accept': 'application/json' }, body: JSON.stringify({ query })
            });
            if (!response.ok) { console.error(`AniList API error: ${response.status}`, await response.text()); return []; }
            const json = await response.json();
            return json.data.Page.media.map(anime => ({
                Title: anime.title.english || anime.title.romaji || "Untitled Anime",
                Poster: anime.coverImage.extraLarge || anime.coverImage.large || anime.coverImage.medium || 'https://placehold.co/180x270/2a2a2a/cccccc?text=No+Image',
                Type: 'anime',
                link_url: anime.externalLinks.find(link => link.site === "Crunchyroll" || link.site === "Funimation")?.url
            }));
        } catch (error) { console.error("Anime data fetch error:", error); return []; }
    }

    async function fetchPopularTvShowsTMDB(count = 10) {
        const corsProxy = "https://api.allorigins.win/raw?url=";
        const url = `${corsProxy}https://api.themoviedb.org/3/tv/popular?api_key=${TMDB_API_KEY}&language=en-US&page=1`;
        try {
            const response = await fetch(url);
            if (!response.ok) { console.error(`TMDb API error for popular TV shows: ${response.status}`); return []; }
            const data = await response.json();
            return data.results.slice(0, count).map(tvShow => ({
                Title: tvShow.name,
                Poster: tvShow.poster_path ? `https://image.tmdb.org/t/p/w500${tvShow.poster_path}` : 'https://placehold.co/180x270/2a2a2a/cccccc?text=No+Image',
                Type: 'series', // TMDb uses 'tv' but we map to 'series' for consistency
                imdbID: tvShow.id // TMDb 'id' can be used as a unique identifier
            }));
        } catch (error) { console.error("TMDb popular TV shows fetch failed:", error); return []; }
    }

    async function fetchBollywoodMoviesOMDb() {
        const bollywoodTitles = ["Keshari Chapter 2", "Chhaava", "Alpha", "Sky Force", "Lahore 1947", "Sikandar", "The Diplomat", "Jaat", "Jewel Thief: The Heist Begins", "Superboys of Malegaon", "Maidaan", "Fighter", "Dunki"];
        const fetchPromises = bollywoodTitles.map(title =>
            fetch(`https://www.omdbapi.com/?t=${encodeURIComponent(title)}&apikey=${OMDB_API_KEY}&plot=short`)
                .then(res => res.json())
                .catch(e => { console.error(`OMDb fetch error for "${title}":`, e); return null; })
        );
        const results = await Promise.all(fetchPromises);
        return results.filter(movie => movie && movie.Response !== "False" && movie.Poster && movie.Poster !== "N/A");
    }

    // === Watch Page Function ===
    function openWatchPageWithDetails(title, imdbID, posterUrl, type) {
        let url = `watch.html?title=${encodeURIComponent(title)}&type=${encodeURIComponent(type)}`;
        if (imdbID) { url += `&id=${encodeURIComponent(imdbID)}`; }
        if (posterUrl) { url += `&poster=${encodeURIComponent(posterUrl)}&bigPoster=${encodeURIComponent(posterUrl)}`; }
        window.location.href = url;
    }
    window.openWatchPageWithDetails = openWatchPageWithDetails;

    // === Initialization ===
    document.addEventListener("DOMContentLoaded", async () => {
      applyDeviceModeClass();
      applyGradientToStylishText();

      // Initial render of providers (important to set currentProvider)
      await renderProviders();

      // Fetch hero movies and home page data after providers are loaded
      await fetchHeroMovies();
      await fetchHomePageData();

      const heroElement = document.getElementById("hero");
      if (heroElement) {
        heroElement.addEventListener('touchstart', handleTouchStart, false);
        heroElement.addEventListener('touchmove', handleTouchMove, false);
        heroElement.addEventListener('touchend', handleTouchEnd, false);
      }

      const notification = document.getElementById("notification");
      if (notification) {
          setTimeout(() => {
              const alertInstance = bootstrap.Alert.getInstance(notification) || new bootstrap.Alert(notification);
              alertInstance.close();
          }, 4000);
      }

      document.getElementById("try-btn").addEventListener("click", function() {
        window.location.href = "suzam19.html";
      });

      // Scroll to Top Button logic
      const scrollToTopBtn = document.getElementById('scrollToTopBtn');
      window.addEventListener('scroll', () => {
          if (document.body.scrollTop > 200 || document.documentElement.scrollTop > 200) {
              scrollToTopBtn.classList.add('show');
          } else {
              scrollToTopBtn.classList.remove('show');
          }
      });
      scrollToTopBtn.addEventListener('click', () => {
          window.scrollTo({ top: 0, behavior: 'smooth' });
      });

      // Handle scroll for fixed header background
      const fixedHeader = document.getElementById('fixed-header');
      window.addEventListener('scroll', () => {
          if (window.scrollY > 50) { // Adjust scroll threshold as needed
              fixedHeader.classList.add('scrolled');
          } else {
              fixedHeader.classList.remove('scrolled');
          }
      });
    });

    // === Swipe Detection Handlers for Hero Carousel ===
    function handleTouchStart(event) {
      touchStartX = event.touches[0].clientX;
      clearInterval(heroInterval);
    }
    function handleTouchMove(event) {
      touchEndX = event.touches[0].clientX;
    }
    function handleTouchEnd() {
      const deltaX = touchEndX - touchStartX;
      if (Math.abs(deltaX) > swipeThreshold) {
        if (deltaX < 0) { heroIndex = (heroIndex + 1) % heroMovies.length; }
        else { heroIndex = (heroIndex - 1 + heroMovies.length) % heroMovies.length; }
        showHeroMovie(heroIndex);
      }
      resetHeroInterval();
      touchStartX = 0;
      touchEndX = 0;
    }

    // === Device Mode Detection and Class Application ===
    function applyDeviceModeClass() {
      const width = window.innerWidth;
      const body = document.body;
      const desktopNav = document.querySelector('.nav_bar_container');
      const mobileNav = document.getElementById('bottom-nav');
      const topActionBtns = document.querySelectorAll('.top-action-btn');
      const fixedHeader = document.getElementById('fixed-header');


      if (width >= 768) {
        body.classList.add('desktop-mode');
        body.classList.remove('mobile-mode');
        // Hide mobile specific elements
        if (mobileNav) mobileNav.style.display = 'none';
        topActionBtns.forEach(btn => btn.style.display = 'none'); // Ensure all top action buttons are hidden
        // Show desktop specific elements
        if (desktopNav) desktopNav.style.display = 'block';
        if (fixedHeader) fixedHeader.style.display = 'none'; // Hide fixed header in desktop
      } else {
        body.classList.add('mobile-mode');
        body.classList.remove('desktop-mode');
        // Hide desktop specific elements
        if (desktopNav) desktopNav.style.display = 'none';
        // Show mobile specific elements
        if (mobileNav) mobileNav.style.display = 'flex'; // Use flex to maintain layout
        topActionBtns.forEach(btn => btn.style.display = 'flex'); // UNCOMMENTED: Ensure top action buttons are shown
        if (fixedHeader) fixedHeader.style.display = 'flex'; // Show fixed header in mobile
      }
    }
    window.addEventListener('resize', applyDeviceModeClass);

    // === Hide/Show bottom navigation based on scroll direction ===
    let lastScrollTop = 0;
    const bottomNav = document.getElementById('bottom-nav');
    if (bottomNav) {
        window.addEventListener('scroll', () => {
            let st = window.pageYOffset || document.documentElement.scrollTop;
            const scrollThreshold = 5;
            if (Math.abs(st - lastScrollTop) <= scrollThreshold) { return; }

            if (st > lastScrollTop && st > bottomNav.offsetHeight) {
                bottomNav.style.transform = 'translateY(100%)';
            } else if (st < lastScrollTop) {
                bottomNav.style.transform = 'translateY(0)';
            }
            lastScrollTop = st <= 0 ? 0 : st;
        });
    }
  </script>
</body>
</html>
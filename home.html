<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>SUZA - Home</title>
  
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Bootstrap & Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  
  <!-- Custom CSS -->
  <style>
    :root {
      --theme-color: #00c3ff; /* Default primary color (cyan-blue) */
      --theme-second-color: #ff5722; /* Default secondary color (orange-red) */
      --background-dark: #0f0f0f;
      --card-background: #1e1e1e;
      --text-light: #f1f1f1;
      --text-muted: #aaaaaa;
      --border-color: #333;
      --gradient-main: linear-gradient(90deg, var(--theme-color), var(--theme-second-color));
      --gradient-alt: linear-gradient(135deg, #6a11cb, #2575fc); /* Example secondary gradient */
    }

    /* Set a solid black background for the entire body */
    body {
      font-family: 'Inter', sans-serif; /* Primary font */
      background-color: black; /* Solid black background */
      background-image: none; /* Ensure no background image/gradient */
      background-attachment: fixed;
      color: var(--text-light);
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
      overflow-x: hidden;
      padding-bottom: 80px; /* Space for bottom nav */
    }
    
    img {
      -webkit-user-drag: none;
      cursor: default;
    }

    /* General containers */
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }

    /* Stylish section titles with icons */
    .stylish-text {
      font-family: 'Poppins', sans-serif;
      font-size: 2.5rem;
      font-weight: 700;
      background: var(--gradient-main);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 25px;
      margin-top: 30px;
      transition: background 0.3s ease;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .stylish-text i {
        font-size: 2rem;
        -webkit-text-fill-color: var(--theme-color);
        text-shadow: 0 0 8px rgba(var(--theme-color-rgb), 0.5); /* Subtle glow */
    }

    /* Header for sections with "More" link */
    .stylish-header-container {
        display: flex;
        justify-content: space-between;
        align-items: flex-end;
        margin-bottom: 15px;
    }
    .more-link {
        font-family: 'Inter', sans-serif;
        font-size: 1.1rem;
        font-weight: 500;
        color: var(--text-muted);
        text-decoration: none;
        transition: color 0.3s ease, transform 0.2s ease;
        padding-bottom: 5px;
        display: flex;
        align-items: center;
    }
    .more-link:hover {
        color: var(--theme-color);
        transform: translateX(5px);
    }
    .more-link i {
        font-size: 0.9em;
        margin-left: 5px;
        transition: transform 0.2s ease;
    }
    .more-link:hover i {
        transform: translateX(3px);
    }

    /* Hamburger and News Buttons (Mobile only) */
    .top-action-btn {
      position: absolute;
      top: 20px;
      background: rgba(0, 0, 0, 0.7); /* Slightly darker */
      backdrop-filter: blur(5px);
      border: none;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 30;
      transition: transform 0.3s ease, background 0.3s ease, box-shadow 0.3s ease;
      box-shadow: 0 4px 15px rgba(0,0,0,0.5);
    }
    .top-action-btn:hover {
      transform: scale(1.1);
      background: rgba(0, 0, 0, 0.9);
      box-shadow: 0 6px 20px rgba(0,0,0,0.6);
    }
    .top-action-btn i {
      font-size: 1.6rem;
      color: var(--text-light);
    }
    .hamburger-btn { left: 20px; }
    .news-btn { right: 20px; }

    /* Offcanvas Sidebar Enhancements */
    .offcanvas-start {
      width: 250px;
      background: rgba(0, 0, 0, 0.98); /* Almost opaque */
      backdrop-filter: blur(15px); /* Stronger blur */
      border-right: 1px solid var(--border-color);
      box-shadow: 5px 0 20px rgba(0,0,0,0.7);
    }
    .offcanvas-header { border-bottom: 1px solid var(--border-color); padding: 20px; }
    .offcanvas-header h5 { color: var(--text-light); font-family: 'Poppins', sans-serif; font-weight: 600; }
    .offcanvas-body ul { padding-left: 0; list-style: none; }
    .offcanvas-body ul li { margin-bottom: 12px; }
    .offcanvas-body ul li a {
      display: flex;
      align-items: center;
      background: var(--card-background);
      border: 1px solid rgba(255, 255, 255, 0.15); /* Stronger border */
      border-radius: 10px;
      padding: 12px 15px;
      color: var(--text-light);
      font-size: 1.1rem;
      text-decoration: none;
      transition: all 0.3s ease;
      box-shadow: 0 2px 8px rgba(0,0,0,0.4);
    }
    .offcanvas-body ul li a.active {
      background: var(--gradient-main);
      color: #fff;
      font-weight: 600;
      box-shadow: 0 0 20px rgba(var(--theme-color-rgb), 0.7); /* More prominent glow */
      transform: translateX(5px);
    }
    .offcanvas-body ul li a:hover {
      background: var(--gradient-alt);
      color: #fff;
      transform: translateX(3px);
      box-shadow: 0 6px 18px rgba(0,0,0,0.6);
    }
    .provider-icon {
      margin-right: 10px;
      font-size: 1.3rem;
      color: var(--text-light);
      transition: color 0.3s ease;
    }
    .offcanvas-body ul li a.active .provider-icon {
        color: #fff;
    }

    /* HERO SECTION */
    #hero {
      position: relative;
      height: 85vh; /* Even taller hero section */
      background-size: cover;
      background-position: center;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      color: white;
      transition: background 0.7s ease-in-out; /* Slower transition */
      overflow: hidden;
      touch-action: pan-y;
      border-radius: 0 0 35px 35px; /* More rounded bottom corners */
      box-shadow: 0 15px 40px rgba(0,0,0,0.8);
      animation: heroBackgroundPan 60s infinite alternate linear; /* Subtle pan animation */
    }
    @keyframes heroBackgroundPan {
        0% { background-position: 0% 0%; }
        100% { background-position: 100% 100%; }
    }

    #hero-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(to top, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0.5) 50%, transparent 100%);
      z-index: 10;
    }
    #hero-content {
      position: relative;
      z-index: 20;
      opacity: 0;
      transform: translateY(70px);
      animation: fadeInUp 1.2s forwards cubic-bezier(0.2, 0.8, 0.2, 1); /* Slower, smoother fade in */
      padding: 0 25px;
      max-width: 900px; /* Wider content area */
      display: flex; /* Use flexbox for content alignment */
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }
    @keyframes fadeInUp {
      to { opacity: 1; transform: translateY(0); }
    }
    /* Removed #hero-mini-poster styles */
    #hero-title {
      font-family: 'Poppins', sans-serif;
      font-size: 4.2rem; /* Even larger hero title */
      font-weight: 700;
      letter-spacing: 3px; /* Wider spacing */
      margin-bottom: 1rem;
      text-shadow: 0 8px 25px rgba(0,0,0,0.9); /* Stronger shadow */
      line-height: 1.1;
      background: var(--gradient-main);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    #hero-synopsis {
        font-size: 1.1rem;
        color: var(--text-light);
        margin-bottom: 1.5rem;
        max-height: 80px; /* Limit synopsis height */
        overflow: hidden;
        text-overflow: ellipsis;
        display: -webkit-box;
        -webkit-line-clamp: 3; /* Show max 3 lines */
        -webkit-box-orient: vertical;
        text-shadow: 0 2px 10px rgba(0,0,0,0.5);
    }
    #hero-rating {
      font-size: 1.6rem;
      font-weight: 600;
      margin-bottom: 2rem;
      color: var(--text-light);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      text-shadow: 0 2px 8px rgba(0,0,0,0.5);
    }
    #hero-rating i {
        color: gold;
        font-size: 1.4em;
        filter: drop-shadow(0 0 5px rgba(255,215,0,0.7)); /* Star glow */
    }
    .hero-btn {
      padding: 18px 40px; /* Even larger button */
      background: var(--gradient-main);
      color: #fff;
      font-size: 1.3rem;
      border: none;
      border-radius: 35px; /* Even more rounded */
      transition: all 0.3s ease;
      cursor: pointer;
      font-weight: 600;
      margin-top: 2.5rem;
      box-shadow: 0 10px 30px rgba(0,0,0,0.7);
      display: inline-flex;
      align-items: center;
      gap: 12px;
      animation: pulse 2s infinite ease-in-out; /* Subtle pulse animation */
    }
    @keyframes pulse {
        0% { transform: scale(1); box-shadow: 0 10px 30px rgba(0,0,0,0.7); }
        50% { transform: scale(1.03); box-shadow: 0 15px 45px rgba(0,0,0,0.9); }
        100% { transform: scale(1); box-shadow: 0 10px 30px rgba(0,0,0,0.7); }
    }
    .hero-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 18px 50px rgba(0,0,0,0.9);
      background: var(--gradient-alt);
      animation: none; /* Stop pulse on hover */
    }
    .hero-btn i {
        font-size: 1.6em;
    }

    /* Dot Indicators */
    #hero-dots {
      /* Removed absolute positioning, now part of flex column */
      display: flex;
      justify-content: center;
      gap: 12px; /* Wider gap */
      z-index: 25;
      margin-top: 20px; /* Add margin to separate from the button */
    }
    .hero-dot {
      width: 16px; /* Even larger dots */
      height: 16px;
      background: rgba(255, 255, 255, 0.4); /* More transparent when inactive */
      border-radius: 50%;
      cursor: pointer;
      transition: all 0.3s ease;
      border: 2px solid rgba(255, 255, 255, 0.2);
    }
    .hero-dot.active {
      background: var(--theme-color);
      border-color: var(--theme-color);
      transform: scale(1.3); /* More pronounced active state */
      box-shadow: 0 0 15px rgba(var(--theme-color-rgb), 0.8); /* Glow effect */
    }

    /* Horizontal Scroll Sections */
    .horizontal-scroll {
      display: flex;
      overflow-x: scroll;
      padding: 15px 0;
      gap: 25px; /* Even wider gap */
      scroll-snap-type: x mandatory;
      -webkit-overflow-scrolling: touch;
      scrollbar-width: thin;
      scrollbar-color: var(--theme-color) var(--background-dark);
    }
    .horizontal-scroll::-webkit-scrollbar { height: 10px; } /* Thicker scrollbar */
    .horizontal-scroll::-webkit-scrollbar-track { background: var(--card-background); border-radius: 10px; }
    .horizontal-scroll::-webkit-scrollbar-thumb {
      background-color: var(--theme-color);
      border-radius: 10px;
      border: 3px solid var(--background-dark); /* Thicker border for thumb */
    }

    .scroll-item {
      flex: 0 0 auto;
      width: 180px; /* Even wider items */
      scroll-snap-align: start;
      border-radius: 20px; /* More rounded */
      overflow: hidden;
      cursor: pointer;
      transition: all 0.3s ease;
      background-color: var(--card-background);
      box-shadow: 0 8px 30px rgba(0,0,0,0.5); /* Stronger shadow */
      padding-bottom: 12px;
      position: relative; /* For shimmer effect */
    }
    .scroll-item::before { /* Shimmer effect for lazy loaded images */
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 240px; /* Match image height */
        background: linear-gradient(90deg, transparent, rgba(255,255,255,.05), transparent);
        transform: translateX(-100%);
        transition: transform 0.5s ease-out;
        z-index: 1;
    }
    .scroll-item.loading::before {
        transform: translateX(100%);
        animation: shimmer 1.5s infinite linear;
    }
    @keyframes shimmer {
        0% { transform: translateX(-100%); }
        100% { transform: translateX(100%); }
    }

    .scroll-item img {
      width: 100%;
      height: 270px; /* Fixed height for consistent images */
      object-fit: cover;
      border-radius: 20px 20px 0 0;
      transition: transform 0.4s ease-out; /* Slower, smoother zoom */
    }
    .scroll-item:hover {
      transform: translateY(-12px); /* More pronounced lift */
      box-shadow: 0 20px 50px rgba(0,0,0,0.8);
    }
    .scroll-item:hover img {
      transform: scale(1.1);
    }
    .scroll-item p {
      font-size: 15px; /* Slightly larger text */
      text-align: center;
      padding: 10px 8px 0;
      font-weight: 600; /* Bolder text */
      color: var(--text-light);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    /* Bottom Navigation Bar (Mobile only) */
    nav.navbar {
      background: rgba(0, 0, 0, 0.9); /* Darker, more opaque */
      backdrop-filter: blur(15px); /* Stronger blur */
      position: fixed;
      bottom: 0;
      width: 100%;
      display: flex;
      justify-content: space-around;
      align-items: center;
      padding: 15px 0; /* More padding */
      border-top: 1px solid var(--border-color);
      transition: transform 0.3s ease;
      z-index: 998;
      box-shadow: 0 -8px 25px rgba(0,0,0,0.7);
    }
    .nav-link {
      text-align: center;
      color: var(--text-light);
      transition: all 0.3s ease;
      padding: 12px 18px; /* More padding */
      border-radius: 15px; /* More rounded */
      font-size: 16px; /* Larger font */
      display: flex;
      flex-direction: column;
      align-items: center;
      text-decoration: none;
      position: relative; /* For active glow */
    }
    .nav-link i {
      font-size: 30px; /* Larger icons */
      margin-bottom: 6px;
    }
    .nav-link:hover, .nav-link.active {
      color: var(--theme-color);
      transform: scale(1.1); /* More pronounced scale */
      background-color: rgba(var(--theme-color-rgb), 0.15); /* More visible background */
    }
    .nav-link.active {
        font-weight: 600;
        text-shadow: 0 0 10px rgba(var(--theme-color-rgb), 0.5); /* Active text glow */
    }
    .nav-link.active::after { /* Active indicator */
        content: '';
        position: absolute;
        bottom: 5px;
        width: 30px;
        height: 4px;
        background: var(--gradient-main);
        border-radius: 2px;
        animation: activeUnderline 0.5s forwards;
    }
    @keyframes activeUnderline {
        from { width: 0px; }
        to { width: 30px; }
    }

    /* Desktop Mode Sidebar Navigation (Replaces Bottom Nav) */
    body.desktop-mode .nav_bar_container {
      position: fixed;
      top: 0;
      left: 0;
      width: 70px; /* Thicker when collapsed */
      height: 100vh;
      background: var(--card-background);
      color: var(--text-light);
      overflow-x: hidden;
      overflow-y: auto;
      white-space: nowrap;
      transition: width 0.4s ease, background 0.3s ease; /* Slower transition */
      border-top-right-radius: 20px;
      border-bottom-right-radius: 20px;
      box-shadow: 8px 0 25px rgba(0,0,0,0.6); /* Stronger shadow */
      z-index: 1000;
      padding-top: 30px;
    }
    body.desktop-mode .nav_bar_container:hover {
      width: 280px; /* Wider when expanded */
    }
    body.desktop-mode .nav_bar_container ul {
      list-style: none;
      margin: 0;
      padding: 0;
    }
    body.desktop-mode .nav_items {
      font-size: 1.2rem; /* Larger font */
      padding: 18px 25px; /* Increased padding */
      cursor: pointer;
      display: flex;
      align-items: center;
      color: var(--text-light);
      text-decoration: none;
      transition: all 0.3s ease;
      position: relative; /* For active glow */
    }
    body.desktop-mode .nav_items:hover {
      background: rgba(var(--theme-color-rgb), 0.2); /* More visible hover background */
      color: var(--theme-color);
      transform: translateX(8px); /* More pronounced slide */
    }
    body.desktop-mode .nav_items.active {
        background: var(--gradient-main);
        color: #fff;
        font-weight: 700; /* Bolder */
        box-shadow: inset 5px 0 20px rgba(0,0,0,0.4); /* Stronger inner shadow */
        text-shadow: 0 0 10px rgba(var(--theme-color-rgb), 0.6); /* Active text glow */
    }
    body.desktop-mode .nav_items .fa {
      margin-right: 20px; /* More spacing */
      min-width: 35px; /* Wider icon area */
      text-align: center;
      font-size: 1.6em; /* Larger icon */
      color: var(--text-light);
      transition: color 0.3s ease;
    }
    body.desktop-mode .nav_items.active .fa {
        color: #fff;
    }

    /* Hide mobile bottom nav in desktop mode */
    @media (min-width: 768px) {
      #bottom-nav { display: none !important; }
      .top-action-btn { display: none !important; }
      body.desktop-mode .container { margin-left: 90px; padding-top: 40px; }
      body.desktop-mode #hero { margin-left: 90px; border-radius: 0 0 35px 35px; }
      /* Hide desktop sidebar when mobile mode is active */
      body.mobile-mode .nav_bar_container { display: none !important; }
    }
    /* Mobile specific adjustments */
    @media (max-width: 767px) {
        body.desktop-mode .nav_bar_container { display: none !important; }
        body.mobile-mode .container { padding: 10px; }
        /* Removed #hero-mini-poster adjustments for mobile */
        #hero-title { font-size: 2.8rem; }
        #hero-rating { font-size: 1.3rem; }
        .hero-btn { padding: 12px 28px; font-size: 1.1rem; margin-top: 1.5rem;} /* Adjusted margin-top */
        .stylish-text { font-size: 2.2rem; }
        .stylish-text i { font-size: 1.8rem; }
        .more-link { font-size: 0.95rem; }
        .scroll-item { width: 140px; }
        .scroll-item img { height: 210px; }
        .scroll-item p { font-size: 13px; }
        .offcanvas-start { width: 85%; }
        #notification { bottom: 90px; /* Above bottom nav */ }
        /* Adjust mobile navigation link padding for better fit */
        nav.navbar .nav-link {
            padding: 8px 10px; /* Reduced padding */
            font-size: 14px; /* Slightly smaller font */
        }
        nav.navbar .nav-link i {
            font-size: 24px; /* Smaller icons */
            margin-bottom: 4px;
        }
    }

    /* Notification card */
    #notification {
      position: fixed;
      bottom: 80px;
      right: 20px;
      z-index: 1050;
      min-width: 280px;
      background-color: var(--card-background);
      border: 1px solid var(--border-color);
      border-radius: 12px;
      color: var(--text-light);
      box-shadow: 0 5px 20px rgba(0,0,0,0.5);
      padding: 15px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    #notification i {
        font-size: 1.5rem;
        color: var(--theme-color);
    }
    #notification .btn-light {
        background: var(--gradient-main);
        color: #fff;
        border: none;
        padding: 8px 15px;
        border-radius: 8px;
        font-weight: 500;
        transition: transform 0.2s ease, opacity 0.2s ease;
    }
    #notification .btn-light:hover {
        transform: scale(1.05);
        opacity: 0.9;
    }
    #notification .btn-close {
        filter: invert(1);
        position: absolute;
        top: 10px;
        right: 10px;
        font-size: 1rem;
        padding: 5px;
    }

    /* Scroll to Top Button */
    #scrollToTopBtn {
        display: none; /* Hidden by default */
        position: fixed;
        bottom: 90px; /* Above bottom nav/notification */
        left: 20px;
        z-index: 999;
        background: var(--gradient-alt);
        color: #fff;
        border: none;
        border-radius: 50%;
        width: 50px;
        height: 50px;
        font-size: 24px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        transition: opacity 0.3s ease, transform 0.3s ease;
        opacity: 0;
        pointer-events: none; /* Disable clicks when hidden */
    }
    #scrollToTopBtn.show {
        opacity: 1;
        pointer-events: auto; /* Enable clicks when shown */
        transform: translateY(-5px);
    }
    #scrollToTopBtn:hover {
        transform: translateY(-8px) scale(1.05);
        box-shadow: 0 8px 20px rgba(0,0,0,0.7);
    }
  </style>
</head>

<body class="bg-dark text-light">

  <!-- HERO SECTION -->
  <div id="hero">
    <!-- Hamburger Button (Mobile only) -->
    <button class="hamburger-btn top-action-btn" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasProviders" aria-controls="offcanvasProviders">
      <i class="bi bi-list"></i>
    </button>
    <!-- News Button (Mobile only) -->
    <button class="news-btn top-action-btn" type="button" onclick="window.location.href='news.html';">
      <i class="bi bi-newspaper"></i>
    </button>
    <div id="hero-overlay"></div>
    <div id="hero-content">
      <!-- Removed mini poster image -->
      <h1 id="hero-title">Loading...</h1>
      <p id="hero-synopsis">Fetching exciting movie details...</p>
      <div id="hero-rating"><i class="bi bi-star-fill"></i> N/A</div>
      <button class="hero-btn" id="watch-hero"><i class="bi bi-play-fill"></i> Watch Now</button>
      <!-- Dot indicators container - Moved inside hero-content -->
      <div id="hero-dots"></div>
    </div>
  </div>

  <!-- Offcanvas Sidebar for Providers -->
  <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasProviders" aria-labelledby="offcanvasProvidersLabel">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title" id="offcanvasProvidersLabel">Providers</h5>
      <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
      <ul class="list-unstyled">
        <li>
          <a href="home.html?provider=vegamovies" class="provider-link" data-provider="vegamovies">
            <i class="bi bi-film provider-icon"></i> Vegamovies
          </a>
        </li>
        <li>
          <a href="moviesMod.html?provider=moviesmod" class="provider-link" data-provider="moviesmod">
            <i class="bi bi-film provider-icon"></i> Moviesmod
          </a>
        </li>
        <li>
          <a href="trakt.tv/trakt.html?provider=trakt.tv" class="provider-link" data-provider="trakt.tv">
            <i class="bi bi-tv provider-icon"></i> Trakt.tv
          </a>
        </li>
        <li>
          <a href="Anime/Anime.html?provider=netmirror" class="provider-link" data-provider="netmirror">
            <i class="bi bi-vinyl provider-icon"></i> Anime
          </a>
        </li>
        <li>
          <a href="provider.html?provider=moviedrive" class="provider-link" data-provider="moviedrive">
            <i class="bi bi-camera-reels provider-icon"></i> Moviedrive
          </a>
        </li>
      </ul>
    </div>
  </div>

  <!-- MAIN CONTENT (Horizontal Scroll Sections) -->
  <div class="container mt-4">
    <div class="stylish-header-container">
      <h3 class="stylish-text"><i class="bi bi-fire"></i> Upcoming</h3>
      <a href="more6.html" class="more-link">More <i class="bi bi-arrow-right"></i></a>
    </div>
    <div class="horizontal-scroll" id="upcoming-scroll">
        <!-- Content will be dynamically loaded here -->
    </div>
    
    <div class="stylish-header-container">
      <h3 class="stylish-text"><i class="bi bi-film"></i> Movies</h3>
      <a href="more.html" class="more-link">More <i class="bi bi-arrow-right"></i></a>
    </div>
    <div class="horizontal-scroll" id="movies-scroll">
        <!-- Content will be dynamically loaded here -->
    </div>

    <div class="stylish-header-container">
      <h3 class="stylish-text"><i class="bi bi-star"></i> Anime</h3>
      <a href="more2.html" class="more-link">More <i class="bi bi-arrow-right"></i></a>
    </div>
    <div class="horizontal-scroll" id="anime-scroll">
        <!-- Content will be dynamically loaded here -->
    </div>

    <div class="stylish-header-container">
      <h3 class="stylish-text"><i class="bi bi-collection-play"></i> Web Series</h3>
      <a href="more1.html" class="more-link">More <i class="bi bi-arrow-right"></i></a>
    </div>
    <div class="horizontal-scroll" id="web-series-scroll">
        <!-- Content will be dynamically loaded here -->
    </div>
    
    <div class="stylish-header-container">
      <h3 class="stylish-text"><i class="bi bi-tv"></i> TV Shows</h3>
      <a href="more1.html" class="more-link">More <i class="bi bi-arrow-right"></i></a>
    </div>
    <div class="horizontal-scroll" id="tv-shows-scroll">
        <!-- Content will be dynamically loaded here -->
    </div>

    <div class="stylish-header-container">
      <h3 class="stylish-text"><i class="bi bi-boombox"></i> Bollywood</h3>
      <a href="more3.html" class="more-link">More <i class="bi bi-arrow-right"></i></a>
    </div>
    <div class="horizontal-scroll" id="bollywood-scroll">
        <!-- Content will be dynamically loaded here -->
    </div>
  </div>

  <!-- BOTTOM NAVIGATION BAR (Mobile only) -->
  <nav class="navbar navbar-dark fixed-bottom" id="bottom-nav">
    <div class="container-fluid d-flex justify-content-around">
      <a href="home.html" class="nav-link"><i class="bi bi-house-door-fill"></i>Home</a>
      <a href="search.html" class="nav-link"><i class="bi bi-search"></i>Search</a>
      <a href="watchlist.html" class="nav-link"><i class="bi bi-bookmark"></i>Watchlist</a>
      <!-- Play History removed from mobile navigation -->
      <a href="settings.html" class="nav-link"><i class="bi bi-gear"></i>Settings</a>
    </div>
  </nav>

  <!-- DESKTOP SIDEBAR NAVIGATION -->
  <div class="nav_bar_container">
    <ul>
      <a href="home.html" class="nav_items"><i class="fa fa-home"></i> Home</a>
      <a href="#" class="nav_items" data-bs-toggle="offcanvas" data-bs-target="#offcanvasProviders" aria-controls="offcanvasProviders"><i class="bi bi-grid-3x3-gap-fill"></i> Providers</a>
      <a href="genres.html" class="nav_items"><i class="bi bi-tags-fill"></i> Genres</a>
      <a href="new-releases.html" class="nav_items"><i class="bi bi-lightning-fill"></i> New Releases</a>
      <a href="popular.html" class="nav_items"><i class="bi bi-fire"></i> Popular</a>
      <a href="my-favorites.html" class="nav_items"><i class="bi bi-heart-fill"></i> My Favorites</a>
      <a href="search.html" class="nav_items"><i class="bi bi-search"></i> Search</a>
      <a href="watchlist.html" class="nav-link"><i class="bi bi-bookmark"></i> Watchlist</a>
      <a href="play-history.html" class="nav_items"><i class="bi bi-clock-history"></i> Play History</a>
      <a href="settings.html" class="nav_items"><i class="bi bi-gear"></i> Settings</a>
    </ul>
  </div>

  <!-- Notification card -->
  <div id="notification" class="alert alert-success alert-dismissible fade show" role="alert">
    <i class="bi bi-music-note"></i> 
    SUZA Music for your favourite song and heartbeat sound
    <button type="button" class="btn btn-light btn-sm" id="try-btn">Try</button>
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
  </div>

  <!-- Scroll to Top Button -->
  <button id="scrollToTopBtn" title="Go to top">
      <i class="bi bi-arrow-up"></i>
  </button>
  
  <!-- SCRIPTS -->
  <script>
    // Theme color management (similar to watch.html for consistency)
    let currentThemeColor = localStorage.getItem("themeColor") || '#00c3ff'; // Default if not set

    window.addEventListener('load', function () {
        var savedColor = localStorage.getItem("themeColor");
        if (savedColor) {
            currentThemeColor = savedColor;
            document.documentElement.style.setProperty('--theme-color', savedColor);
            let r = parseInt(savedColor.substring(1, 3), 16);
            let g = parseInt(savedColor.substring(3, 5), 16);
            let b = parseInt(savedColor.substring(5, 7), 16);
            document.documentElement.style.setProperty('--theme-color-rgb', `${r},${g},${b}`);
            document.documentElement.style.setProperty('--theme-second-color', '#ff5722');
            let r2 = parseInt('ff', 16);
            let g2 = parseInt('57', 16);
            let b2 = parseInt('22', 16);
            document.documentElement.style.setProperty('--theme-second-color-rgb', `${r2},${g2},${b2}`);
        }
        applyGradientToStylishText(); // Apply gradient on load after theme color is set
    });

    function applyGradientToStylishText() {
        document.querySelectorAll('.stylish-text').forEach(function (element) {
            element.style.background = `linear-gradient(45deg, var(--theme-color), var(--theme-second-color))`;
            element.style.webkitBackgroundClip = 'text';
            element.style.webkitTextFillColor = 'transparent';
        });
    }

    // Hide hamburger when offcanvas opens and show it when closed
    var offcanvasEl = document.getElementById('offcanvasProviders');
    if (offcanvasEl) {
      offcanvasEl.addEventListener('show.bs.offcanvas', function () {
        const hamburgerBtn = document.querySelector('.hamburger-btn');
        if (hamburgerBtn) hamburgerBtn.style.opacity = '0';
      });
      offcanvasEl.addEventListener('hidden.bs.offcanvas', function () {
        const hamburgerBtn = document.querySelector('.hamburger-btn');
        if (hamburgerBtn) hamburgerBtn.style.opacity = '1';
      });
    }

    // On the provider selection page, set the active provider based on the URL parameter.
    document.addEventListener('DOMContentLoaded', function() {
      var path = window.location.pathname.split("/").pop();
      if (path === '') {
        path = 'home.html';
      }

      var navLinks = document.querySelectorAll('nav.navbar .nav-link, .nav_bar_container .nav_items');

      navLinks.forEach(function(link) {
        var href = link.getAttribute('href');
        // Check if href is for offcanvas toggle (e.g., '#')
        if (href === '#' && link.dataset.bsToggle === 'offcanvas') {
            // This link opens an offcanvas, it's not a navigation page
            link.classList.remove('active'); // Ensure it's not active based on URL
            return; 
        }

        const linkFilename = href.split('/').pop();
        if (linkFilename === path) {
          link.classList.add('active');
        } else {
          link.classList.remove('active');
        }
      });
    });

    // Set the active provider based on the URL parameter.
    document.addEventListener('DOMContentLoaded', function() {
      const providerLinks = document.querySelectorAll('.provider-link');
      const urlParams = new URLSearchParams(window.location.search);
      const activeProviderFromURL = urlParams.get('provider');

      let currentActiveProvider = activeProviderFromURL || localStorage.getItem('activeProvider');

      if (currentActiveProvider) {
        const activeLink = document.querySelector(`.provider-link[data-provider="${currentActiveProvider}"]`);
        if (activeLink) {
          activeLink.classList.add('active');
        } else if (providerLinks.length) {
            providerLinks[0].classList.add('active');
            localStorage.setItem('activeProvider', providerLinks[0].getAttribute('data-provider'));
        }
      } else if (providerLinks.length) {
        providerLinks[0].classList.add('active');
        localStorage.setItem('activeProvider', providerLinks[0].getAttribute('data-provider'));
      }

      providerLinks.forEach(link => {
        link.addEventListener('click', function(e) {
          providerLinks.forEach(l => l.classList.remove('active'));
          this.classList.add('active');
          localStorage.setItem('activeProvider', this.getAttribute('data-provider'));
        });
      });
    });

    // === API Keys ===
    const OMDB_API_KEY = "90b37ad0";
    const TRAKT_CLIENT_ID = "97ca49d276bd090c063dd2c6174ed4c622ee58d443d1160aac87276f50b34b36";
    const TMDB_API_KEY = "b6b677eb7d4ec17f700e3d4dfc31d005"; // Your TMDb API key

    // === Hero Carousel Variables ===
    let heroMovies = [];
    let heroIndex = 0;
    let heroInterval;

    // === Swipe Detection Variables ===
    let touchStartX = 0;
    let touchEndX = 0;
    const swipeThreshold = 50;

    // === Global Event Listeners --- Moved to the end of the script or inline in HTML
    document.addEventListener('contextmenu', function(e) { e.preventDefault(); });
    document.addEventListener('touchstart', function(e) { if(e.touches.length > 1) { e.preventDefault(); } });


    // === Hero Carousel Functions ===
    async function fetchHeroMovies() {
      const trendingTitles = [
        "Jawan", "Animal", "Pathaan", "K.G.F: Chapter 2", "Vikram", "RRR",
        "Solo Leveling", "Demon Slayer: Kimetsu no Yaiba", "Jujutsu Kaisen", "Spy x Family"
      ];
      const randomTrendingTitle = trendingTitles[Math.floor(Math.random() * trendingTitles.length)];

      try {
        const response = await fetch(`https://www.omdbapi.com/?s=${encodeURIComponent(randomTrendingTitle)}&apikey=${OMDB_API_KEY}`);
        const data = await response.json();

        if (data.Search && data.Search.length > 0) {
          const itemsToFetch = data.Search.filter(item => item.Type !== "game").slice(0, 5);
          const detailsPromises = itemsToFetch.map(item =>
            fetch(`https://www.omdbapi.com/?i=${item.imdbID}&apikey=${OMDB_API_KEY}&plot=short`).then(res => res.json())
          );
          heroMovies = await Promise.all(detailsPromises);
          heroMovies = heroMovies.filter(movie => movie && movie.Response !== "False" && movie.Poster && movie.Poster !== "N/A");

          if (heroMovies.length > 0) {
            heroIndex = 0;
            showHeroMovie(heroIndex);
            buildHeroDots();
            if (heroInterval) clearInterval(heroInterval);
            heroInterval = setInterval(() => {
              heroIndex = (heroIndex + 1) % heroMovies.length;
              showHeroMovie(heroIndex);
            }, 5000);
          } else {
            setHeroFallback("No valid hero content found.");
          }
        } else {
          setHeroFallback(`No search results for "${randomTrendingTitle}".`);
        }
      } catch (error) {
        console.error("Error fetching hero movies:", error);
        setHeroFallback("Error loading content.");
      }
    }

    function setHeroFallback(message) {
      document.getElementById("hero").style.backgroundImage = "url('https://placehold.co/1200x600/1a1a1a/cccccc?text=Content+Unavailable')";
      document.getElementById("hero-title").textContent = message;
      document.getElementById("hero-synopsis").textContent = ""; // Clear synopsis
      document.getElementById("hero-rating").innerHTML = '';
      document.getElementById("watch-hero").style.display = "none";
      document.getElementById("hero-dots").innerHTML = "";
    }

    function buildHeroDots() {
      const dotsContainer = document.getElementById("hero-dots");
      dotsContainer.innerHTML = "";
      heroMovies.forEach((movie, idx) => {
        const dot = document.createElement("div");
        dot.classList.add("hero-dot");
        if (idx === heroIndex) dot.classList.add("active");
        dot.addEventListener("click", () => {
          heroIndex = idx;
          showHeroMovie(heroIndex);
          resetHeroInterval();
        });
        dotsContainer.appendChild(dot);
      });
    }

    function resetHeroInterval() {
      clearInterval(heroInterval);
      heroInterval = setInterval(() => {
        heroIndex = (heroIndex + 1) % heroMovies.length;
        showHeroMovie(heroIndex);
      }, 5000);
    }

    function showHeroMovie(index) {
      const movie = heroMovies[index];
      if (!movie) return;

      document.getElementById("hero").style.backgroundImage = `url(${movie.Poster})`;
      
      document.getElementById("hero-title").textContent = movie.Title || "Unknown Title";
      document.getElementById("hero-synopsis").textContent = movie.Plot || "Synopsis not available."; // Set synopsis
      document.getElementById("hero-rating").innerHTML = `<i class="bi bi-star-fill"></i> ${movie.imdbRating && movie.imdbRating !== "N/A" ? movie.imdbRating : "N/A"}`;

      const watchButton = document.getElementById("watch-hero");
      watchButton.style.display = "inline-flex";
      watchButton.onclick = () => {
          let watchPageURL = `watch.html?title=${encodeURIComponent(movie.Title)}&type=${movie.Type.toLowerCase()}`;
          if (movie.imdbID) {
              watchPageURL += `&id=${movie.imdbID}`;
          }
          if (movie.Poster) {
              watchPageURL += `&poster=${encodeURIComponent(movie.Poster)}`;
              watchPageURL += `&bigPoster=${encodeURIComponent(movie.Poster)}`;
          }
          window.location.href = watchPageURL;
      };

      const dots = document.querySelectorAll(".hero-dot");
      dots.forEach((dot, idx) => {
        dot.classList.toggle("active", idx === index);
      });

      const heroContent = document.getElementById("hero-content");
      heroContent.style.animation = 'none';
      void heroContent.offsetWidth; // Trigger reflow
      heroContent.style.animation = 'fadeInUp 1.2s forwards cubic-bezier(0.2, 0.8, 0.2, 1)';
    }

    // === Horizontal Scroll Sections Functions ===
    async function populateHorizontalSection(elementId, fetchFunction, type = 'movie') {
      const sectionElement = document.getElementById(elementId);
      if (!sectionElement) {
        console.error(`Element with ID '${elementId}' not found.`);
        return;
      }
      sectionElement.innerHTML = '<p style="text-align: center; color: var(--text-muted); width: 100%;">Loading content...</p>';

      try {
        const items = await fetchFunction();
        let htmlContent = "";

        if (items.length > 0) {
          items.forEach(item => {
            const title = item.Title || item.title || "Untitled";
            const posterUrl = item.Poster || item.poster || item.coverImage?.extraLarge || item.coverImage?.large || item.coverImage?.medium || "https://placehold.co/180x270/2a2a2a/cccccc?text=No+Image";
            const shortTitle = title.length > 18 ? title.substring(0, 18) + "..." : title;
            const itemType = item.Type || type;

            htmlContent += `
              <div class="scroll-item" 
                   onclick="openWatchPageWithDetails('${encodeURIComponent(title)}', 
                                                       '${encodeURIComponent(item.imdbID || '')}', 
                                                       '${encodeURIComponent(posterUrl)}',
                                                       '${encodeURIComponent(itemType)}')">
                <img src="${posterUrl}" alt="${title}" loading="lazy">
                <p>${shortTitle}</p>
              </div>`;
          });
        } else {
          htmlContent = "<p style='text-align: center; width: 100%; color: var(--text-muted);'>No content available at this time.</p>";
        }
        sectionElement.innerHTML = htmlContent;
      } catch (error) {
        console.error(`Error populating ${elementId}:`, error);
        sectionElement.innerHTML = "<p style='text-align: center; width: 100%; color: var(--text-muted);'>Error loading content.</p>";
      }
    }

    // --- Data Fetching Functions for Sections ---
    async function fetchTraktItemsAndOMDbDetails(endpoint, limit = 10) {
        if (!TRAKT_CLIENT_ID) { console.error("Trakt Client ID is not set. Cannot fetch from Trakt."); return []; }
        if (!OMDB_API_KEY) { console.error("OMDb API Key is not set. Cannot fetch details from OMDb."); return []; }

        try {
            const traktResponse = await fetch(`https://api.trakt.tv/${endpoint}?limit=${limit}`, {
                headers: { 'Content-Type': 'application/json', 'trakt-api-key': TRAKT_CLIENT_ID, 'trakt-api-version': '2' }
            });
            if (!traktResponse.ok) { console.error(`Trakt API error for ${endpoint}: ${traktResponse.status}`, await traktResponse.text()); return []; }
            const traktData = await traktResponse.json();
            const itemsWithImdbId = traktData.map(item => item.movie || item.show).filter(item => item && item.ids && item.ids.imdb);
            const omdbDetailsPromises = itemsWithImdbId.map(item =>
                fetch(`https://www.omdbapi.com/?i=${item.ids.imdb}&apikey=${OMDB_API_KEY}&plot=short`)
                    .then(res => res.json())
                    .catch(e => { console.error(`OMDb fetch error for ${item.ids.imdb}:`, e); return null; })
            );
            const omdbDetails = await Promise.all(omdbDetailsPromises);
            return omdbDetails.filter(item => item && item.Response !== "False" && item.Poster && item.Poster !== "N/A");
        } catch (error) { console.error(`Error in fetchTraktItemsAndOMDbDetails for ${endpoint}:`, error); return []; }
    }

    async function fetchUpcomingMoviesTMDB(count = 10) {
        const corsProxy = "https://api.allorigins.win/raw?url=";
        const url = `${corsProxy}https://api.themoviedb.org/3/movie/upcoming?api_key=${TMDB_API_KEY}&language=en-US&page=1`;
        try {
            const response = await fetch(url);
            if (!response.ok) { console.error(`TMDb API error for upcoming movies: ${response.status}`); return []; }
            const data = await response.json();
            return data.results.slice(0, count).map(movie => ({
                Title: movie.title,
                Poster: movie.poster_path ? `https://image.tmdb.org/t/p/w500${movie.poster_path}` : 'https://placehold.co/180x270/2a2a2a/cccccc?text=No+Image',
                Type: 'movie',
                imdbID: movie.imdb_id
            }));
        } catch (error) { console.error("TMDb upcoming fetch failed:", error); return []; }
    }

    async function fetchAnimeFromAniList(limit = 10) {
        const ANILIST_API_URL = 'https://graphql.anilist.co';
        const query = `
            query { Page(perPage: ${limit}) { media(type: ANIME, sort: POPULARITY_DESC) { id title { romaji english } coverImage { extraLarge large medium } externalLinks { url site } } } }
        `;
        try {
            const response = await fetch(ANILIST_API_URL, {
                method: 'POST', headers: { 'Content-Type': 'application/json', 'Accept': 'application/json' }, body: JSON.stringify({ query })
            });
            if (!response.ok) { console.error(`AniList API error: ${response.status}`, await response.text()); return []; }
            const json = await response.json();
            return json.data.Page.media.map(anime => ({
                Title: anime.title.english || anime.title.romaji || "Untitled Anime",
                Poster: anime.coverImage.extraLarge || anime.coverImage.large || anime.coverImage.medium || 'https://placehold.co/180x270/2a2a2a/cccccc?text=No+Image',
                Type: 'anime',
                link_url: anime.externalLinks.find(link => link.site === "Crunchyroll" || link.site === "Funimation")?.url
            }));
        } catch (error) { console.error("Anime data fetch error:", error); return []; }
    }

    async function fetchPopularTvShowsTMDB(count = 10) {
        const corsProxy = "https://api.allorigins.win/raw?url=";
        const url = `${corsProxy}https://api.themoviedb.org/3/tv/popular?api_key=${TMDB_API_KEY}&language=en-US&page=1`;
        try {
            const response = await fetch(url);
            if (!response.ok) { console.error(`TMDb API error for popular TV shows: ${response.status}`); return []; }
            const data = await response.json();
            return data.results.slice(0, count).map(tvShow => ({
                Title: tvShow.name,
                Poster: tvShow.poster_path ? `https://image.tmdb.org/t/p/w500${tvShow.poster_path}` : 'https://placehold.co/180x270/2a2a2a/cccccc?text=No+Image',
                Type: 'series', // TMDb uses 'tv' but we map to 'series' for consistency
                imdbID: tvShow.id // TMDb 'id' can be used as a unique identifier
            }));
        } catch (error) { console.error("TMDb popular TV shows fetch failed:", error); return []; }
    }

    async function fetchBollywoodMoviesOMDb() {
        const bollywoodTitles = ["Keshari Chapter 2", "Chhaava", "Alpha", "Sky Force", "Lahore 1947", "Sikandar", "The Diplomat", "Jaat", "Jewel Thief: The Heist Begins", "Superboys of Malegaon", "Maidaan", "Fighter", "Dunki"];
        const fetchPromises = bollywoodTitles.map(title =>
            fetch(`https://www.omdbapi.com/?t=${encodeURIComponent(title)}&apikey=${OMDB_API_KEY}&plot=short`)
                .then(res => res.json())
                .catch(e => { console.error(`OMDb fetch error for "${title}":`, e); return null; })
        );
        const results = await Promise.all(fetchPromises);
        return results.filter(movie => movie && movie.Response !== "False" && movie.Poster && movie.Poster !== "N/A");
    }

    // === Watch Page Function ===
    function openWatchPageWithDetails(title, imdbID, posterUrl, type) {
        let url = `watch.html?title=${encodeURIComponent(title)}&type=${encodeURIComponent(type)}`;
        if (imdbID) { url += `&id=${encodeURIComponent(imdbID)}`; }
        if (posterUrl) { url += `&poster=${encodeURIComponent(posterUrl)}&bigPoster=${encodeURIComponent(posterUrl)}`; }
        window.location.href = url;
    }
    window.openWatchPageWithDetails = openWatchPageWithDetails;

    // === Initialization ===
    document.addEventListener("DOMContentLoaded", async () => {
      applyDeviceModeClass();
      applyGradientToStylishText();

      // Initial data fetches for all scroll sections
      await fetchHeroMovies();
      await populateHorizontalSection("upcoming-scroll", fetchUpcomingMoviesTMDB, 'movie');
      await populateHorizontalSection("movies-scroll", () => fetchTraktItemsAndOMDbDetails("movies/trending"), 'movie');
      await populateHorizontalSection("anime-scroll", fetchAnimeFromAniList, 'anime');
      await populateHorizontalSection("web-series-scroll", () => fetchTraktItemsAndOMDbDetails("shows/trending"), 'series');
      await populateHorizontalSection("tv-shows-scroll", fetchPopularTvShowsTMDB, 'series'); // Updated to use TMDb for TV shows
      await populateHorizontalSection("bollywood-scroll", fetchBollywoodMoviesOMDb, 'movie');

      const heroElement = document.getElementById("hero");
      if (heroElement) {
        heroElement.addEventListener('touchstart', handleTouchStart, false);
        heroElement.addEventListener('touchmove', handleTouchMove, false);
        heroElement.addEventListener('touchend', handleTouchEnd, false);
      }

      const notification = document.getElementById("notification");
      if (notification) {
          setTimeout(() => {
              const alertInstance = bootstrap.Alert.getInstance(notification) || new bootstrap.Alert(notification);
              alertInstance.close();
          }, 4000);
      }

      document.getElementById("try-btn").addEventListener("click", function() {
        window.location.href = "suzam19.html";
      });

      // Scroll to Top Button logic
      const scrollToTopBtn = document.getElementById('scrollToTopBtn');
      window.addEventListener('scroll', () => {
          if (document.body.scrollTop > 200 || document.documentElement.scrollTop > 200) {
              scrollToTopBtn.classList.add('show');
          } else {
              scrollToTopBtn.classList.remove('show');
          }
      });
      scrollToTopBtn.addEventListener('click', () => {
          window.scrollTo({ top: 0, behavior: 'smooth' });
      });
    });

    // === Swipe Detection Handlers for Hero Carousel ===
    function handleTouchStart(event) {
      touchStartX = event.touches[0].clientX;
      clearInterval(heroInterval);
    }
    function handleTouchMove(event) {
      touchEndX = event.touches[0].clientX;
    }
    function handleTouchEnd() {
      const deltaX = touchEndX - touchStartX;
      if (Math.abs(deltaX) > swipeThreshold) {
        if (deltaX < 0) { heroIndex = (heroIndex + 1) % heroMovies.length; }
        else { heroIndex = (heroIndex - 1 + heroMovies.length) % heroMovies.length; }
        showHeroMovie(heroIndex);
      }
      resetHeroInterval();
      touchStartX = 0;
      touchEndX = 0;
    }

    // === Device Mode Detection and Class Application ===
    function applyDeviceModeClass() {
      const width = window.innerWidth;
      const body = document.body;
      const desktopNav = document.querySelector('.nav_bar_container');
      const mobileNav = document.getElementById('bottom-nav');
      const topActionBtns = document.querySelectorAll('.top-action-btn');

      if (width >= 768) {
        body.classList.add('desktop-mode');
        body.classList.remove('mobile-mode');
        // Hide mobile specific elements
        if (mobileNav) mobileNav.style.display = 'none';
        topActionBtns.forEach(btn => btn.style.display = 'none');
        // Show desktop specific elements
        if (desktopNav) desktopNav.style.display = 'block';
      } else {
        body.classList.add('mobile-mode');
        body.classList.remove('desktop-mode');
        // Hide desktop specific elements
        if (desktopNav) desktopNav.style.display = 'none';
        // Show mobile specific elements
        if (mobileNav) mobileNav.style.display = 'flex'; // Use flex to maintain layout
        topActionBtns.forEach(btn => btn.style.display = 'flex'); // Use flex to maintain layout
      }
    }
    window.addEventListener('resize', applyDeviceModeClass);

    // === Hide/Show bottom navigation based on scroll direction ===
    let lastScrollTop = 0;
    const bottomNav = document.getElementById('bottom-nav');
    if (bottomNav) {
        window.addEventListener('scroll', () => {
            let st = window.pageYOffset || document.documentElement.scrollTop;
            const scrollThreshold = 5;
            if (Math.abs(st - lastScrollTop) <= scrollThreshold) { return; }

            if (st > lastScrollTop && st > bottomNav.offsetHeight) {
                bottomNav.style.transform = 'translateY(100%)';
            } else if (st < lastScrollTop) {
                bottomNav.style.transform = 'translateY(0)';
            }
            lastScrollTop = st <= 0 ? 0 : st;
        });
    }
  </script>
</body>
</html>